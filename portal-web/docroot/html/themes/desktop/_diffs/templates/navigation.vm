#*
/**
 * Copyright (c) 2000-2007 Liferay, Inc. All rights reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
*#

#if ($layouts.size() > 0)
	<div id="layout-nav-container">
		#set ($layoutIds = "")
		#set ($hiddenIds = "")
		#set ($count = 0)
		#set ($tabClass = "")

		#if ($layout)
			#set($ancestorLayoutId = $layout.getAncestorLayoutId())
		#else
			#set($ancestorLayoutId = "")
		#end

		#foreach($curLayout in $layouts)
			#if ($tilesSelectable.equals("true") && ($layout && ($plid.equals($curLayout.getLayoutId()) || $curLayout.getLayoutId().equals($ancestorLayoutId))))
				#set($isSelectedTab = "true")
				#set($tempVariable1 = "-selected")
			#else
				#set($isSelectedTab = "false")
				#set($tempVariable1 = "")
			#end

			#set($tabHREF = $portalUtil.getLayoutURL($curLayout, $themeDisplay))

			#if ($isSelectedTab.equals("true") && $layoutTypePortlet.hasStateMax())
				#set($curPortletId = "$arrayUtil.getValue($stringUtil.split($layoutTypePortlet.getStateMax()), 0)")

				#set($curPortletURLImpl = $portletURLFactory.create($request, $curPortletId, $plid, false))

				$curPortletURLImpl.setWindowState("normal")
				$curPortletURLImpl.setPortletMode("view")
				$curPortletURLImpl.setAnchor(false)

				#set($tabHREF = $curPortletURLImpl.toString())
			#end

			#set($tabTarget = $portalUtil.getLayoutTarget($curLayout))
			#set($tabName = $curLayout.getName($locale))

			#if ($curLayout.isHidden())
				#if ($hiddenIds.equals(""))
					#set ($hiddenIds = "$curLayout.getLayoutId()")
				#else
					#set ($hiddenIds = "$hiddenIds,$curLayout.getLayoutId()")
				#end
			#else
				#if ($count != 0 && $isSelectedTab.equals("true"))
					<div class="layout-tab-seperator layout-tab-left"></div>
				#end

				#if ($layoutIds.equals(""))
					#set ($layoutIds = "$curLayout.getLayoutId()")
				#else
					#set ($layoutIds = "$layoutIds,$curLayout.getLayoutId()")
				#end

				#if ($isSelectedTab.equals("true"))
					<div id="layout-tab-selected" class="layout-tab">
						<div class="layout-tab-text"><span id="layout-tab-text-edit">$tabName</span></div>
					</div>
					<div class="layout-tab-seperator layout-tab-right"></div>
				#else
					<div class="layout-tab">
						<div class="layout-tab-text"><a href="$tabHREF" $target>$tabName</a></div>
					</div>
				#end

				#set ($count = $count + 1)
			#end

		#end

		<div class="layout-tab-seperator"></div>

		<div id="layout-nav-divider"></div>
	</div>
#end