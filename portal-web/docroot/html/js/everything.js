
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('k(1v 1t.6=="Q"){1t.Q=1t.Q;u 6=l(a,c){k(1t==7)q 1p 6(a,c);a=a||12;k(6.1k(a))q 1p 6(12)[6.C.28?"28":"2E"](a);k(1v a=="22"){u m=/^[^<]*(<(.|\\n)+>)[^>]*$/.2B(a);k(m)a=6.3W([m[1]]);H q 1p 6(c).2o(a)}q 7.4M(a.1g==2A&&a||(a.3e||a.G&&a!=1t&&!a.1V&&a[0]!=Q&&a[0].1V)&&6.3H(a)||[a])};k(1v $!="Q")6.2O$=$;u $=6;6.C=6.8o={3e:"1.1.1",8p:l(){q 7.G},G:0,2a:l(1R){q 1R==Q?6.3H(7):7[1R]},2q:l(a){u J=6(7);J.6j=7;q J.4M(a)},4M:l(a){7.G=0;[].1h.14(7,a);q 7},I:l(C,1y){q 6.I(7,C,1y)},2b:l(19){u 4I=-1;7.I(l(i){k(7==19)4I=i});q 4I},1E:l(20,N,v){u 19=20;k(20.1g==3p)k(N==Q)q 7.G&&6[v||"1E"](7[0],20)||Q;H{19={};19[20]=N}q 7.I(l(2b){O(u F 1B 19)6.1E(v?7.1q:7,F,6.F(7,19[F],v,2b,F))})},1f:l(20,N){q 7.1E(20,N,"2V")},2L:l(e){k(1v e=="22")q 7.3n().3t(12.8r(e));u t="";6.I(e||7,l(){6.I(7.38,l(){k(7.1V!=8)t+=7.1V!=1?7.60:6.C.2L([7])})});q t},2D:l(){u a=6.3W(1x);q 7.I(l(){u b=a[0].3V(T);7.V.2T(b,7);1Z(b.17)b=b.17;b.4i(7)})},3t:l(){q 7.35(1x,T,1,l(a){7.4i(a)})},5n:l(){q 7.35(1x,T,-1,l(a){7.2T(a,7.17)})},5h:l(){q 7.35(1x,Y,1,l(a){7.V.2T(a,7)})},5i:l(){q 7.35(1x,Y,-1,l(a){7.V.2T(a,7.2f)})},4E:l(){q 7.6j||6([])},2o:l(t){q 7.2q(6.2X(7,l(a){q 6.2o(t,a)}))},4w:l(4C){q 7.2q(6.2X(7,l(a){q a.3V(4C!=Q?4C:T)}))},1w:l(t){q 7.2q(6.1k(t)&&6.2k(7,l(2G,2b){q t.14(2G,[2b])})||6.3v(t,7))},2c:l(t){q 7.2q(t.1g==3p&&6.3v(t,7,T)||6.2k(7,l(a){k(t.1g==2A||t.3e)q 6.3g(t,a)<0;H q a!=t}))},1J:l(t){q 7.2q(6.2i(7.2a(),t.1g==3p?6(t).2a():t.G!=Q&&!t.1u?t:[t]))},46:l(1n){q 1n?6.1w(1n,7).r.G>0:Y},18:l(18){q 18==Q?(7.G?7[0].N:1c):7.1E("N",18)},4Q:l(18){q 18==Q?(7.G?7[0].2H:1c):7.3n().3t(18)},35:l(1y,1N,3F,C){u 4w=7.G>1;u a=6.3W(1y);k(3F<0)a.8s();q 7.I(l(){u 19=7;k(1N&&6.1u(7,"1N")&&6.1u(a[0],"3U"))19=7.5E("1T")[0]||7.4i(12.6e("1T"));6.I(a,l(){C.14(19,[4w?7.3V(T):7])})})}};6.1A=6.C.1A=l(){u 1P=1x[0],a=1;k(1x.G==1){1P=7;a=0}u F;1Z(F=1x[a++])O(u i 1B F)1P[i]=F[i];q 1P};6.1A({8v:l(){k(6.2O$)$=6.2O$;q 6},1k:l(C){q!!C&&1v C!="22"&&1v C[0]=="Q"&&/l/i.1s(C+"")},1u:l(B,W){q B.1u&&B.1u.3u()==W.3u()},I:l(19,C,1y){k(19.G==Q)O(u i 1B 19)C.14(19[i],1y||[i,19[i]]);H O(u i=0,6l=19.G;i<6l;i++)k(C.14(19[i],1y||[i,19[i]])===Y)4q;q 19},F:l(B,N,v,2b,F){k(6.1k(N))q N.3s(B,[2b]);u 6m=/z-?2b|7C-?7D|1b|64|8x-?26/i;k(N.1g==3N&&v=="2V"&&!6m.1s(F))q N+"49";q N},16:{1J:l(B,c){6.I(c.3o(/\\s+/),l(i,M){k(!6.16.2P(B.16,M))B.16+=(B.16?" ":"")+M})},2g:l(B,c){B.16=c?6.2k(B.16.3o(/\\s+/),l(M){q!6.16.2P(c,M)}).55(" "):""},2P:l(t,c){t=t.16||t;q t&&1p 4V("(^|\\\\s)"+c+"(\\\\s|$)").1s(t)}},44:l(e,o,f){O(u i 1B o){e.1q["1H"+i]=e.1q[i];e.1q[i]=o[i]}f.14(e,[]);O(u i 1B o)e.1q[i]=e.1q["1H"+i]},1f:l(e,p){k(p=="26"||p=="40"){u 1H={},41,3f,d=["7x","8z","8A","8B"];6.I(d,l(){1H["8C"+7]=0;1H["8E"+7+"8F"]=0});6.44(e,1H,l(){k(6.1f(e,"1e")!="1Y"){41=e.6E;3f=e.6v}H{e=6(e.3V(T)).2o(":4h").5j("2S").4E().1f({4g:"1C",3Z:"6q",1e:"2t",7v:"0",6r:"0"}).5f(e.V)[0];u 3c=6.1f(e.V,"3Z");k(3c==""||3c=="43")e.V.1q.3Z="6s";41=e.6t;3f=e.6u;k(3c==""||3c=="43")e.V.1q.3Z="43";e.V.39(e)}});q p=="26"?41:3f}q 6.2V(e,p)},2V:l(B,F,6k){u J;k(F=="1b"&&6.U.1m)q 6.1E(B.1q,"1b");k(F=="4L"||F=="2u")F=6.U.1m?"3l":"2u";k(!6k&&B.1q[F])J=B.1q[F];H k(12.3X&&12.3X.45){k(F=="2u"||F=="3l")F="4L";F=F.1U(/([A-Z])/g,"-$1").4P();u M=12.3X.45(B,1c);k(M)J=M.53(F);H k(F=="1e")J="1Y";H 6.44(B,{1e:"2t"},l(){u c=12.3X.45(7,"");J=c&&c.53(F)||""})}H k(B.4Z){u 54=F.1U(/\\-(\\w)/g,l(m,c){q c.3u()});J=B.4Z[F]||B.4Z[54]}q J},3W:l(a){u r=[];6.I(a,l(i,1L){k(!1L)q;k(1L.1g==3N)1L=1L.8m();k(1v 1L=="22"){u s=6.2Z(1L),1W=12.6e("1W"),2e=[];u 2D=!s.15("<1l")&&[1,"<3T>","</3T>"]||(!s.15("<6y")||!s.15("<1T")||!s.15("<6A"))&&[1,"<1N>","</1N>"]||!s.15("<3U")&&[2,"<1N><1T>","</1T></1N>"]||(!s.15("<6B")||!s.15("<6D"))&&[3,"<1N><1T><3U>","</3U></1T></1N>"]||[0,"",""];1W.2H=2D[1]+s+2D[2];1Z(2D[0]--)1W=1W.17;k(6.U.1m){k(!s.15("<1N")&&s.15("<1T")<0)2e=1W.17&&1W.17.38;H k(2D[1]=="<1N>"&&s.15("<1T")<0)2e=1W.38;O(u n=2e.G-1;n>=0;--n)k(6.1u(2e[n],"1T")&&!2e[n].38.G)2e[n].V.39(2e[n])}1L=1W.38}k(1L.G===0)q;k(1L[0]==Q)r.1h(1L);H r=6.2i(r,1L)});q r},1E:l(B,W,N){u 2m={"O":"6G","6H":"16","4L":6.U.1m?"3l":"2u",2u:6.U.1m?"3l":"2u",2H:"2H",16:"16",N:"N",2R:"2R",2S:"2S",6K:"6L",2Q:"2Q"};k(W=="1b"&&6.U.1m&&N!=Q){B.64=1;q B.1w=B.1w.1U(/4K\\([^\\)]*\\)/6M,"")+(N==1?"":"4K(1b="+N*57+")")}H k(W=="1b"&&6.U.1m)q B.1w?4f(B.1w.6N(/4K\\(1b=(.*)\\)/)[1])/57:1;k(W=="1b"&&6.U.36&&N==1)N=0.7X;k(2m[W]){k(N!=Q)B[2m[W]]=N;q B[2m[W]]}H k(N==Q&&6.U.1m&&6.1u(B,"5S")&&(W=="6Q"||W=="7V"))q B.6S(W).60;H k(B.6T){k(N!=Q)B.7R(W,N);q B.3D(W)}H{W=W.1U(/-([a-z])/6W,l(z,b){q b.3u()});k(N!=Q)B[W]=N;q B[W]}},2Z:l(t){q t.1U(/^\\s+|\\s+$/g,"")},3H:l(a){u r=[];k(a.1g!=2A)O(u i=0,2w=a.G;i<2w;i++)r.1h(a[i]);H r=a.3J(0);q r},3g:l(b,a){O(u i=0,2w=a.G;i<2w;i++)k(a[i]==b)q i;q-1},2i:l(2v,3P){u r=[].3J.3s(2v,0);O(u i=0,63=3P.G;i<63;i++)k(6.3g(3P[i],r)==-1)2v.1h(3P[i]);q 2v},2k:l(1Q,C,48){k(1v C=="22")C=1p 4D("a","i","q "+C);u 1d=[];O(u i=0,2G=1Q.G;i<2G;i++)k(!48&&C(1Q[i],i)||48&&!C(1Q[i],i))1d.1h(1Q[i]);q 1d},2X:l(1Q,C){k(1v C=="22")C=1p 4D("a","q "+C);u 1d=[],r=[];O(u i=0,2G=1Q.G;i<2G;i++){u 18=C(1Q[i],i);k(18!==1c&&18!=Q){k(18.1g!=2A)18=[18];1d=1d.70(18)}}u r=1d.G?[1d[0]]:[];5d:O(u i=1,5N=1d.G;i<5N;i++){O(u j=0;j<i;j++)k(1d[i]==r[j])5z 5d;r.1h(1d[i])}q r}});1p l(){u b=7H.72.4P();6.U={2C:/5I/.1s(b),37:/37/.1s(b),1m:/1m/.1s(b)&&!/37/.1s(b),36:/36/.1s(b)&&!/(74|5I)/.1s(b)};6.75=!6.U.1m||12.76=="7B"};6.I({5p:"a.V",4s:"6.4s(a)",78:"6.25(a,2,\'2f\')",7z:"6.25(a,2,\'5o\')",79:"6.2F(a.V.17,a)",7b:"6.2F(a.17)"},l(i,n){6.C[i]=l(a){u J=6.2X(7,n);k(a&&1v a=="22")J=6.3v(a,J);q 7.2q(J)}});6.I({5f:"3t",7d:"5n",2T:"5h",7f:"5i"},l(i,n){6.C[i]=l(){u a=1x;q 7.I(l(){O(u j=0,2w=a.G;j<2w;j++)6(a[j])[n](7)})}});6.I({5j:l(20){6.1E(7,20,"");7.7h(20)},7i:l(c){6.16.1J(7,c)},7j:l(c){6.16.2g(7,c)},7l:l(c){6.16[6.16.2P(7,c)?"2g":"1J"](7,c)},2g:l(a){k(!a||6.1w(a,[7]).r.G)7.V.39(7)},3n:l(){1Z(7.17)7.39(7.17)}},l(i,n){6.C[i]=l(){q 7.I(n,1x)}});6.I(["5m","5l","5e","5r"],l(i,n){6.C[n]=l(1R,C){q 7.1w(":"+n+"("+1R+")",C)}});6.I(["26","40"],l(i,n){6.C[n]=l(h){q h==Q?(7.G?6.1f(7[0],n):1c):7.1f(n,h.1g==3p?h:h+"49")}});6.1A({1n:{"":"m[2]==\'*\'||6.1u(a,m[2])","#":"a.3D(\'3Y\')==m[2]",":":{5l:"i<m[3]-0",5e:"i>m[3]-0",25:"m[3]-0==i",5m:"m[3]-0==i",2v:"i==0",2W:"i==r.G-1",5M:"i%2==0",5O:"i%2","25-3k":"6.25(a.V.17,m[3],\'2f\',a)==a","2v-3k":"6.25(a.V.17,1,\'2f\')==a","2W-3k":"6.25(a.V.7n,1,\'5o\')==a","7o-3k":"6.2F(a.V.17).G==1",5p:"a.17",3n:"!a.17",5r:"6.C.2L.14([a]).15(m[3])>=0",3a:\'a.v!="1C"&&6.1f(a,"1e")!="1Y"&&6.1f(a,"4g")!="1C"\',1C:\'a.v=="1C"||6.1f(a,"1e")=="1Y"||6.1f(a,"4g")=="1C"\',7q:"!a.2R",2R:"a.2R",2S:"a.2S",2Q:"a.2Q||6.1E(a,\'2Q\')",2L:"a.v==\'2L\'",4h:"a.v==\'4h\'",59:"a.v==\'59\'",42:"a.v==\'42\'",58:"a.v==\'58\'",4O:"a.v==\'4O\'",5v:"a.v==\'5v\'",5w:"a.v==\'5w\'",3h:\'a.v=="3h"||6.1u(a,"3h")\',5x:"/5x|3T|7s|3h/i.1s(a.1u)"},".":"6.16.2P(a,m[2])","@":{"=":"z==m[4]","!=":"z!=m[4]","^=":"z&&!z.15(m[4])","$=":"z&&z.2Y(z.G - m[4].G,m[4].G)==m[4]","*=":"z&&z.15(m[4])>=0","":"z",4U:l(m){q["",m[1],m[3],m[2],m[5]]},5J:"z=a[m[3]]||6.1E(a,m[3]);"},"[":"6.2o(m[2],a).G"},5G:[/^\\[ *(@)([a-2l-3y-]*) *([!*$^=]*) *(\'?"?)(.*?)\\4 *\\]/i,/^(\\[)\\s*(.*?(\\[.*?\\])?[^[]*?)\\s*\\]/,/^(:)([a-2l-3y-]*)\\("?\'?(.*?(\\(.*?\\))?[^(]*?)"?\'?\\)/i,/^([:.#]*)([a-2l-3y*-]*)/i],1O:[/^(\\/?\\.\\.)/,"a.V",/^(>|\\/)/,"6.2F(a.17)",/^(\\+)/,"6.25(a,2,\'2f\')",/^(~)/,l(a){u s=6.2F(a.V.17);q s.3J(0,6.3g(a,s))}],3v:l(1n,1Q,2c){u 1H,M=[];1Z(1n&&1n!=1H){1H=1n;u f=6.1w(1n,1Q,2c);1n=f.t.1U(/^\\s*,\\s*/,"");M=2c?1Q=f.r:6.2i(M,f.r)}q M},2o:l(t,1r){k(1v t!="22")q[t];k(1r&&!1r.1V)1r=1c;1r=1r||12;k(!t.15("//")){1r=1r.4y;t=t.2Y(2,t.G)}H k(!t.15("/")){1r=1r.4y;t=t.2Y(1,t.G);k(t.15("/")>=1)t=t.2Y(t.15("/"),t.G)}u J=[1r],29=[],2W=1c;1Z(t&&2W!=t){u r=[];2W=t;t=6.2Z(t).1U(/^\\/\\//i,"");u 3x=Y;u 1G=/^[\\/>]\\s*([a-2l-9*-]+)/i;u m=1G.2B(t);k(m){6.I(J,l(){O(u c=7.17;c;c=c.2f)k(c.1V==1&&(6.1u(c,m[1])||m[1]=="*"))r.1h(c)});J=r;t=t.1U(1G,"");k(t.15(" ")==0)5z;3x=T}H{O(u i=0;i<6.1O.G;i+=2){u 1G=6.1O[i];u m=1G.2B(t);k(m){r=J=6.2X(J,6.1k(6.1O[i+1])?6.1O[i+1]:l(a){q 3B(6.1O[i+1])});t=6.2Z(t.1U(1G,""));3x=T;4q}}}k(t&&!3x){k(!t.15(",")){k(J[0]==1r)J.4m();6.2i(29,J);r=J=[1r];t=" "+t.2Y(1,t.G)}H{u 34=/^([a-2l-3y-]+)(#)([a-2l-9\\\\*2O-]*)/i;u m=34.2B(t);k(m){m=[0,m[2],m[3],m[1]]}H{34=/^([#.]?)([a-2l-9\\\\*2O-]*)/i;m=34.2B(t)}k(m[1]=="#"&&J[J.G-1].4R){u 3z=J[J.G-1].4R(m[2]);J=r=3z&&(!m[3]||6.1u(3z,m[3]))?[3z]:[]}H{k(m[1]==".")u 4k=1p 4V("(^|\\\\s)"+m[2]+"(\\\\s|$)");6.I(J,l(){u 3C=m[1]!=""||m[0]==""?"*":m[2];k(6.1u(7,"7w")&&3C=="*")3C="2U";6.2i(r,m[1]!=""&&J.G!=1?6.4r(7,[],m[1],m[2],4k):7.5E(3C))});k(m[1]=="."&&J.G==1)r=6.2k(r,l(e){q 4k.1s(e.16)});k(m[1]=="#"&&J.G==1){u 5F=r;r=[];6.I(5F,l(){k(7.3D("3Y")==m[2]){r=[7];q Y}})}J=r}t=t.1U(34,"")}}k(t){u 18=6.1w(t,r);J=r=18.r;t=6.2Z(18.t)}}k(J&&J[0]==1r)J.4m();6.2i(29,J);q 29},1w:l(t,r,2c){1Z(t&&/^[a-z[({<*:.#]/i.1s(t)){u p=6.5G,m;6.I(p,l(i,1G){m=1G.2B(t);k(m){t=t.7y(m[0].G);k(6.1n[m[1]].4U)m=6.1n[m[1]].4U(m);q Y}});k(m[1]==":"&&m[2]=="2c")r=6.1w(m[3],r,T).r;H k(m[1]=="."){u 1G=1p 4V("(^|\\\\s)"+m[2]+"(\\\\s|$)");r=6.2k(r,l(e){q 1G.1s(e.16||"")},2c)}H{u f=6.1n[m[1]];k(1v f!="22")f=6.1n[m[1]][m[2]];3B("f = l(a,i){"+(6.1n[m[1]].5J||"")+"q "+f+"}");r=6.2k(r,f,2c)}}q{r:r,t:t}},4r:l(o,r,1O,W,1G){O(u s=o.17;s;s=s.2f)k(s.1V==1){u 1J=T;k(1O==".")1J=s.16&&1G.1s(s.16);H k(1O=="#")1J=s.3D("3Y")==W;k(1J)r.1h(s);k(1O=="#"&&r.G)4q;k(s.17)6.4r(s,r,1O,W,1G)}q r},4s:l(B){u 4N=[];u M=B.V;1Z(M&&M!=12){4N.1h(M);M=M.V}q 4N},25:l(M,1d,3F,B){1d=1d||1;u 1R=0;O(;M;M=M[3F]){k(M.1V==1)1R++;k(1R==1d||1d=="5M"&&1R%2==0&&1R>1&&M==B||1d=="5O"&&1R%2==1&&M==B)q M}},2F:l(n,B){u r=[];O(;n;n=n.2f){k(n.1V==1&&(!B||n!=B))r.1h(n)}q r}});6.E={1J:l(S,v,1j,D){k(6.U.1m&&S.4c!=Q)S=1t;k(D)1j.D=D;k(!1j.2n)1j.2n=7.2n++;k(!S.1I)S.1I={};u 32=S.1I[v];k(!32){32=S.1I[v]={};k(S["3I"+v])32[0]=S["3I"+v]}32[1j.2n]=1j;S["3I"+v]=7.5T;k(!7.1i[v])7.1i[v]=[];7.1i[v].1h(S)},2n:1,1i:{},2g:l(S,v,1j){k(S.1I)k(v&&v.v)4u S.1I[v.v][v.1j.2n];H k(v&&S.1I[v])k(1j)4u S.1I[v][1j.2n];H O(u i 1B S.1I[v])4u S.1I[v][i];H O(u j 1B S.1I)7.2g(S,j)},1M:l(v,D,S){D=6.3H(D||[]);k(!S)6.I(7.1i[v]||[],l(){6.E.1M(v,D,7)});H{u 1j=S["3I"+v],18,C=6.1k(S[v]);k(1j){D.5U(7.2m({v:v,1P:S}));k((18=1j.14(S,D))!==Y)7.4v=T}k(C&&18!==Y)S[v]();7.4v=Y}},5T:l(E){k(1v 6=="Q"||6.E.4v)q;E=6.E.2m(E||1t.E||{});u 3M;u c=7.1I[E.v];u 1y=[].3J.3s(1x,1);1y.5U(E);O(u j 1B c){1y[0].1j=c[j];1y[0].D=c[j].D;k(c[j].14(7,1y)===Y){E.2h();E.2z();3M=Y}}k(6.U.1m)E.1P=E.2h=E.2z=E.1j=E.D=1c;q 3M},2m:l(E){k(!E.1P&&E.5V)E.1P=E.5V;k(E.5W==Q&&E.5Y!=Q){u e=12.4y,b=12.7K;E.5W=E.5Y+(e.5Z||b.5Z);E.7M=E.7N+(e.61||b.61)}k(6.U.2C&&E.1P.1V==3){u 33=E;E=6.1A({},33);E.1P=33.1P.V;E.2h=l(){q 33.2h()};E.2z=l(){q 33.2z()}}k(!E.2h)E.2h=l(){7.3M=Y};k(!E.2z)E.2z=l(){7.7Q=T};q E}};6.C.1A({3R:l(v,D,C){q 7.I(l(){6.E.1J(7,v,C||D,D)})},6n:l(v,D,C){q 7.I(l(){6.E.1J(7,v,l(E){6(7).62(E);q(C||D).14(7,1x)},D)})},62:l(v,C){q 7.I(l(){6.E.2g(7,v,C)})},1M:l(v,D){q 7.I(l(){6.E.1M(v,D,7)})},3r:l(){u a=1x;q 7.69(l(e){7.4F=7.4F==0?1:0;e.2h();q a[7.4F].14(7,[e])||Y})},7T:l(f,g){l 4e(e){u p=(e.v=="3S"?e.7U:e.7Y)||e.7Z;1Z(p&&p!=7)2s{p=p.V}2y(e){p=7};k(p==7)q Y;q(e.v=="3S"?f:g).14(7,[e])}q 7.3S(4e).6b(4e)},28:l(f){k(6.3O)f.14(12,[6]);H{6.3b.1h(l(){q f.14(7,[6])})}q 7}});6.1A({3O:Y,3b:[],28:l(){k(!6.3O){6.3O=T;k(6.3b){6.I(6.3b,l(){7.14(12)});6.3b=1c}k(6.U.36||6.U.37)12.81("6g",6.28,Y)}}});1p l(){6.I(("82,83,2E,84,85,4Y,69,86,"+"87,88,89,3S,6b,8b,3T,"+"4O,8d,8f,8g,2M").3o(","),l(i,o){6.C[o]=l(f){q f?7.3R(o,f):7.1M(o)}});k(6.U.36||6.U.37)12.8h("6g",6.28,Y);H k(6.U.1m){12.8i("<8j"+"8l 3Y=6a 8q=T "+"4B=//:><\\/2d>");u 2d=12.4R("6a");k(2d)2d.2p=l(){k(7.3A!="1X")q;7.V.39(7);6.28()};2d=1c}H k(6.U.2C)6.4W=4c(l(){k(12.3A=="8t"||12.3A=="1X"){5u(6.4W);6.4W=1c;6.28()}},10);6.E.1J(1t,"2E",6.28)};k(6.U.1m)6(1t).6n("4Y",l(){u 1i=6.E.1i;O(u v 1B 1i){u 4X=1i[v],i=4X.G;k(i&&v!=\'4Y\')6p 6.E.2g(4X[i-1],v);1Z(--i)}});6.C.1A({1K:l(P,K){u 1C=7.1w(":1C");P?1C.23({26:"1K",40:"1K",1b:"1K"},P,K):1C.I(l(){7.1q.1e=7.2N?7.2N:"";k(6.1f(7,"1e")=="1Y")7.1q.1e="2t"});q 7},1D:l(P,K){u 3a=7.1w(":3a");P?3a.23({26:"1D",40:"1D",1b:"1D"},P,K):3a.I(l(){7.2N=7.2N||6.1f(7,"1e");k(7.2N=="1Y")7.2N="2t";7.1q.1e="1Y"});q 7},52:6.C.3r,3r:l(C,4S){u 1y=1x;q 6.1k(C)&&6.1k(4S)?7.52(C,4S):7.I(l(){6(7)[6(7).46(":1C")?"1K":"1D"].14(6(7),1y)})},6x:l(P,K){q 7.23({26:"1K"},P,K)},6z:l(P,K){q 7.23({26:"1D"},P,K)},6C:l(P,K){q 7.I(l(){u 56=6(7).46(":1C")?"1K":"1D";6(7).23({26:56},P,K)})},6F:l(P,K){q 7.23({1b:"1K"},P,K)},6I:l(P,K){q 7.23({1b:"1D"},P,K)},6J:l(P,3q,K){q 7.23({1b:3q},P,K)},23:l(F,P,1o,K){q 7.1F(l(){7.2r=6.1A({},F);u 1l=6.P(P,1o,K);O(u p 1B F){u e=1p 6.30(7,1l,p);k(F[p].1g==3N)e.2x(e.M(),F[p]);H e[F[p]](F)}})},1F:l(v,C){k(!C){C=v;v="30"}q 7.I(l(){k(!7.1F)7.1F={};k(!7.1F[v])7.1F[v]=[];7.1F[v].1h(C);k(7.1F[v].G==1)C.14(7)})}});6.1A({P:l(P,1o,C){u 1l=P&&P.1g==6O?P:{1X:C||!C&&1o||6.1k(P)&&P,24:P,1o:C&&1o||1o&&1o.1g!=4D&&1o};1l.24=(1l.24&&1l.24.1g==3N?1l.24:{6U:6X,6Y:51}[1l.24])||6Z;1l.1H=1l.1X;1l.1X=l(){6.5X(7,"30");k(6.1k(1l.1H))1l.1H.14(7)};q 1l},1o:{},1F:{},5X:l(B,v){v=v||"30";k(B.1F&&B.1F[v]){B.1F[v].4m();u f=B.1F[v][0];k(f)f.14(B)}},30:l(B,1a,F){u z=7;u y=B.1q;u 4j=6.1f(B,"1e");y.1e="2t";y.5y="1C";z.a=l(){k(1a.3j)1a.3j.14(B,[z.2j]);k(F=="1b")6.1E(y,"1b",z.2j);H k(5g(z.2j))y[F]=5g(z.2j)+"49"};z.5k=l(){q 4f(6.1f(B,F))};z.M=l(){u r=4f(6.2V(B,F));q r&&r>-7g?r:z.5k()};z.2x=l(4d,3q){z.4o=(1p 5s()).5t();z.2j=4d;z.a();z.47=4c(l(){z.3j(4d,3q)},13)};z.1K=l(){k(!B.1z)B.1z={};B.1z[F]=7.M();1a.1K=T;z.2x(0,B.1z[F]);k(F!="1b")y[F]="5q"};z.1D=l(){k(!B.1z)B.1z={};B.1z[F]=7.M();1a.1D=T;z.2x(B.1z[F],0)};z.3r=l(){k(!B.1z)B.1z={};B.1z[F]=7.M();k(4j=="1Y"){1a.1K=T;k(F!="1b")y[F]="5q";z.2x(0,B.1z[F])}H{1a.1D=T;z.2x(B.1z[F],0)}};z.3j=l(31,3G){u t=(1p 5s()).5t();k(t>1a.24+z.4o){5u(z.47);z.47=1c;z.2j=3G;z.a();k(B.2r)B.2r[F]=T;u 29=T;O(u i 1B B.2r)k(B.2r[i]!==T)29=Y;k(29){y.5y="";y.1e=4j;k(6.1f(B,"1e")=="1Y")y.1e="2t";k(1a.1D)y.1e="1Y";k(1a.1D||1a.1K)O(u p 1B B.2r)k(p=="1b")6.1E(y,p,B.1z[p]);H y[p]=""}k(29&&6.1k(1a.1X))1a.1X.14(B)}H{u n=t-7.4o;u p=n/1a.24;z.2j=1a.1o&&6.1o[1a.1o]?6.1o[1a.1o](p,n,31,(3G-31),1a.24):((-5L.7E(p*5L.7F)/2)+0.5)*(3G-31)+31;z.a()}}}});6.C.1A({7G:l(R,21,K){7.2E(R,21,K,1)},2E:l(R,21,K,1S){k(6.1k(R))q 7.3R("2E",R);K=K||l(){};u v="65";k(21)k(6.1k(21)){K=21;21=1c}H{21=6.2U(21);v="6f"}u 4x=7;6.3d({R:R,v:v,D:21,1S:1S,1X:l(2J,11){k(11=="2K"||!1S&&11=="5H")4x.1E("2H",2J.3L).4T().I(K,[2J.3L,11,2J]);H K.14(4x,[2J.3L,11,2J])}});q 7},7L:l(){q 6.2U(7)},4T:l(){q 7.2o("2d").I(l(){k(7.4B)6.6c(7.4B);H 6.4H(7.2L||7.7P||7.2H||"")}).4E()}});k(!1t.3w)3w=l(){q 1p 7S("7W.80")};6.I("68,5R,5Q,6h,5P,5C".3o(","),l(i,o){6.C[o]=l(f){q 7.3R(o,f)}});6.1A({2a:l(R,D,K,v,1S){k(6.1k(D)){K=D;D=1c}q 6.3d({R:R,D:D,2K:K,4t:v,1S:1S})},8a:l(R,D,K,v){q 6.2a(R,D,K,v,1)},6c:l(R,K){q 6.2a(R,1c,K,"2d")},8c:l(R,D,K){q 6.2a(R,D,K,"67")},8e:l(R,D,K,v){k(6.1k(D)){K=D;D={}}q 6.3d({v:"6f",R:R,D:D,2K:K,4t:v})},8k:l(27){6.3K.27=27},8n:l(6o){6.1A(6.3K,6o)},3K:{1i:T,v:"65",27:0,5a:"8u/x-8w-5S-8D",50:T,4G:T,D:1c},3m:{},3d:l(s){s=6.1A({},6.3K,s);k(s.D){k(s.50&&1v s.D!="22")s.D=6.2U(s.D);k(s.v.4P()=="2a")s.R+=((s.R.15("?")>-1)?"&":"?")+s.D}k(s.1i&&!6.4a++)6.E.1M("68");u 4z=Y;u L=1p 3w();L.6P(s.v,s.R,s.4G);k(s.D)L.3i("6R-6V",s.5a);k(s.1S)L.3i("71-4A-73",6.3m[s.R]||"77, 7a 7c 7e 4b:4b:4b 7k");L.3i("X-7m-7p","3w");k(L.7r)L.3i("7t","7u");k(s.5A)s.5A(L);k(s.1i)6.E.1M("5C",[L,s]);u 2p=l(4n){k(L&&(L.3A==4||4n=="27")){4z=T;u 11;2s{11=6.6i(L)&&4n!="27"?s.1S&&6.6d(L,s.R)?"5H":"2K":"2M";k(11!="2M"){u 3E;2s{3E=L.4l("66-4A")}2y(e){}k(s.1S&&3E)6.3m[s.R]=3E;u D=6.5D(L,s.4t);k(s.2K)s.2K(D,11);k(s.1i)6.E.1M("5P",[L,s])}H 6.3Q(s,L,11)}2y(e){11="2M";6.3Q(s,L,11,e)}k(s.1i)6.E.1M("5Q",[L,s]);k(s.1i&&!--6.4a)6.E.1M("5R");k(s.1X)s.1X(L,11);L.2p=l(){};L=1c}};L.2p=2p;k(s.27>0)5c(l(){k(L){L.7J();k(!4z)2p("27")}},s.27);u 4J=L;2s{4J.7O(s.D)}2y(e){6.3Q(s,L,1c,e)}k(!s.4G)2p();q 4J},3Q:l(s,L,11,e){k(s.2M)s.2M(L,11,e);k(s.1i)6.E.1M("6h",[L,s,e])},4a:0,6i:l(r){2s{q!r.11&&8y.8G=="42:"||(r.11>=51&&r.11<6w)||r.11==5b||6.U.2C&&r.11==Q}2y(e){}q Y},6d:l(L,R){2s{u 5K=L.4l("66-4A");q L.11==5b||5K==6.3m[R]||6.U.2C&&L.11==Q}2y(e){}q Y},5D:l(r,v){u 4p=r.4l("7A-v");u D=!v&&4p&&4p.15("L")>=0;D=v=="L"||D?r.7I:r.3L;k(v=="2d")6.4H(D);k(v=="67")3B("D = "+D);k(v=="4Q")6("<1W>").4Q(D).4T();q D},2U:l(a){u s=[];k(a.1g==2A||a.3e)6.I(a,l(){s.1h(2I(7.W)+"="+2I(7.N))});H O(u j 1B a)k(a[j]&&a[j].1g==2A)6.I(a[j],l(){s.1h(2I(j)+"="+2I(7))});H s.1h(2I(j)+"="+2I(a[j]));q s.55("&")},4H:l(D){k(1t.5B)1t.5B(D);H k(6.U.2C)1t.5c(D,0);H 3B.3s(1t,D)}})}',62,539,'||||||jQuery|this|||||||||||||if|function|||||return||||var|type||||||elem|fn|data|event|prop|length|else|each|ret|callback|xml|cur|value|for|speed|undefined|url|element|true|browser|parentNode|name||false|||status|document||apply|indexOf|className|firstChild|val|obj|options|opacity|null|result|display|css|constructor|push|global|handler|isFunction|opt|msie|expr|easing|new|style|context|test|window|nodeName|typeof|filter|arguments|args|orig|extend|in|hidden|hide|attr|queue|re|old|events|add|show|arg|trigger|table|token|target|elems|num|ifModified|tbody|replace|nodeType|div|complete|none|while|key|params|string|animate|duration|nth|height|timeout|ready|done|get|index|not|script|tb|nextSibling|remove|preventDefault|merge|now|grep|z0|fix|guid|find|onreadystatechange|pushStack|curAnim|try|block|cssFloat|first|al|custom|catch|stopPropagation|Array|exec|safari|wrap|load|sibling|el|innerHTML|encodeURIComponent|res|success|text|error|oldblock|_|has|selected|disabled|checked|insertBefore|param|curCSS|last|map|substr|trim|fx|firstNum|handlers|originalEvent|re2|domManip|mozilla|opera|childNodes|removeChild|visible|readyList|parPos|ajax|jquery|oWidth|inArray|button|setRequestHeader|step|child|styleFloat|lastModified|empty|split|String|to|toggle|call|append|toUpperCase|multiFilter|XMLHttpRequest|foundToken|9_|oid|readyState|eval|tag|getAttribute|modRes|dir|lastNum|makeArray|on|slice|ajaxSettings|responseText|returnValue|Number|isReady|second|handleError|bind|mouseover|select|tr|cloneNode|clean|defaultView|id|position|width|oHeight|file|static|swap|getComputedStyle|is|timer|inv|px|active|00|setInterval|from|handleHover|parseFloat|visibility|radio|appendChild|oldDisplay|rec|getResponseHeader|shift|isTimeout|startTime|ct|break|getAll|parents|dataType|delete|triggered|clone|self|documentElement|requestDone|Modified|src|deep|Function|end|lastToggle|async|globalEval|pos|xml2|alpha|float|setArray|matched|submit|toLowerCase|html|getElementById|fn2|evalScripts|_resort|RegExp|safariTimer|els|unload|currentStyle|processData|200|_toggle|getPropertyValue|newProp|join|state|100|password|checkbox|contentType|304|setTimeout|check|gt|appendTo|parseInt|before|after|removeAttr|max|lt|eq|prepend|previousSibling|parent|1px|contains|Date|getTime|clearInterval|image|reset|input|overflow|continue|beforeSend|execScript|ajaxSend|httpData|getElementsByTagName|tmp|parse|notmodified|webkit|_prefix|xmlRes|Math|even|rl|odd|ajaxSuccess|ajaxComplete|ajaxStop|form|handle|unshift|srcElement|pageX|dequeue|clientX|scrollLeft|nodeValue|scrollTop|unbind|sl|zoom|GET|Last|json|ajaxStart|click|__ie_init|mouseout|getScript|httpNotModified|createElement|POST|DOMContentLoaded|ajaxError|httpSuccess|prevObject|force|ol|exclude|one|settings|do|absolute|left|relative|clientHeight|clientWidth|offsetWidth|300|slideDown|thead|slideUp|tfoot|td|slideToggle|th|offsetHeight|fadeIn|htmlFor|class|fadeOut|fadeTo|readonly|readOnly|gi|match|Object|open|action|Content|getAttributeNode|tagName|slow|Type|ig|600|fast|400|concat|If|userAgent|Since|compatible|boxModel|compatMode|Thu|next|siblings|01|children|Jan|prependTo|1970|insertAfter|10000|removeAttribute|addClass|removeClass|GMT|toggleClass|Requested|lastChild|only|With|enabled|overrideMimeType|textarea|Connection|close|right|object|Top|substring|prev|content|CSS1Compat|font|weight|cos|PI|loadIfModified|navigator|responseXML|abort|body|serialize|pageY|clientY|send|textContent|cancelBubble|setAttribute|ActiveXObject|hover|fromElement|method|Microsoft|9999|toElement|relatedTarget|XMLHTTP|removeEventListener|blur|focus|resize|scroll|dblclick|mousedown|mouseup|mousemove|getIfModified|change|getJSON|keydown|post|keypress|keyup|addEventListener|write|scr|ajaxTimeout|ipt|toString|ajaxSetup|prototype|size|defer|createTextNode|reverse|loaded|application|noConflict|www|line|location|Bottom|Right|Left|padding|urlencoded|border|Width|protocol'.split('|'),0,{}))
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toGMTString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toGMTString();}
var path=options.path?'; path='+options.path:'';var domain=options.domain?'; domain='+options.domain:'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};var Class=function(properties){var klass=function(){for(var p in this){if(this[p])this[p]._proto_=this;}
if(arguments[0]!='noinit'&&this.initialize)return this.initialize.apply(this,arguments);};klass.extend=this.extend;klass.implement=this.implement;klass.prototype=properties;return klass;};Class.empty=function(){};Class.create=function(properties){return new Class(properties);};Class.prototype={extend:function(properties){var pr0t0typ3=new this('noinit');for(var property in properties){var previous=pr0t0typ3[property];var current=properties[property];if(previous&&previous!=current)current=previous.parentize(current)||current;pr0t0typ3[property]=current;}
return new Class(pr0t0typ3);},implement:function(properties){for(var property in properties)this.prototype[property]=properties[property];}};Object.Native=function(){for(var i=0;i<arguments.length;i++)arguments[i].extend=Class.prototype.implement;};new Object.Native(Function,Array,String,Number);Function.extend({parentize:function(current){var previous=this;return function(){this.parent=previous;return current.apply(this,arguments);};}});var agent=navigator.userAgent.toLowerCase();var is_ie=(agent.indexOf("msie")!=-1);var is_ie_4=(is_ie&&(agent.indexOf("msie 4")!=-1));var is_ie_5=(is_ie&&(agent.indexOf("msie 5.0")!=-1));var is_ie_5_up=(is_ie&&!is_ie_4);var is_ie_5_5=(is_ie&&(agent.indexOf("msie 5.5")!=-1));var is_ie_5_5_up=(is_ie&&!is_ie_4&&!is_ie_5);var is_ie_6=(is_ie&&(agent.indexOf("msie 6.0")!=-1));var is_ie_7=(is_ie&&(agent.indexOf("msie 7.0")!=-1));var is_mozilla=((agent.indexOf("mozilla")!=-1)&&(agent.indexOf("spoofer")==-1)&&(agent.indexOf("compatible")==-1)&&(agent.indexOf("opera")==-1)&&(agent.indexOf("webtv")==-1)&&(agent.indexOf("hotjava")==-1));var is_mozilla_1_3_up=(is_mozilla&&(navigator.productSub>20030210));var is_ns_4=(!is_ie&&(agent.indexOf("mozilla/4.")!=-1));var is_rtf=(is_ie_5_5_up||is_mozilla_1_3_up);var is_safari=(agent.indexOf("safari")!=-1);$=null;var _$J=jQuery;jQuery.getOne=function(s,context){var rt;if(typeof s=="object"){rt=s;}
else if(typeof s=="string"){if(s.search(/^[#.]/)==-1){s="#"+s;}
if(context==null){rt=jQuery(s);}
else{rt=jQuery(s,context);}
rt=(rt.length==0?null:rt.get(0))}
return rt;}
var Liferay=new Object();Liferay.Util={submitCountdown:0,addEventHandler:function(obj,type,func){if(type.indexOf("on")!=0){type="on"+type;}
var temp=obj[type];if(typeof obj[type]!="function"){obj[type]=func;}
else{obj[type]=function(){if(temp){temp();}
func();}}},check:function(form,name,checked){for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.name==name)&&(e.type=="checkbox")){e.checked=checked;}}},checkAll:function(form,name,allBox){if(Liferay.Util.isArray(name)){for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if(e.type=="checkbox"){for(var j=0;j<name.length;j++){if(e.name==name[j]){e.checked=allBox.checked;}}}}}
else{for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.name==name)&&(e.type=="checkbox")){e.checked=allBox.checked;}}}},checkAllBox:function(form,name,allBox){var totalBoxes=0;var totalOn=0;if(Liferay.Util.isArray(name)){for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.name!=allBox.name)&&(e.type=="checkbox")){for(var j=0;j<name.length;j++){if(e.name==name[j]){totalBoxes++;if(e.checked){totalOn++;}}}}}}
else{for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.name!=allBox.name)&&(e.name==name)&&(e.type=="checkbox")){totalBoxes++;if(e.checked){totalOn++;}}}}
if(totalBoxes==totalOn){allBox.checked=true;}
else{allBox.checked=false;}},checkMaxLength:function(box,maxLength){if((box.value.length)>=maxLength){box.value=box.value.substring(0,maxLength-1);}},checkTab:function(box){if((document.all)&&(event.keyCode==9)){box.selection=document.selection.createRange();setTimeout("Liferay.Util.processTab(\""+box.id+"\")",0);}},createInputElement:function(name){if(is_ie){var entry=document.createElement("<input name='"+name+"'></input>");}
else{var entry=document.createElement("input");entry.name=name;}
return entry;},getSelectedIndex:function(col){for(var i=0;i<col.length;i++){if(col[i].checked==true){return i;}}
return-1;},getSelectedRadioValue:function(col){var i=Liferay.Util.getSelectedIndex(col);if(i==-1){var radioValue=col.value;if(radioValue==null){radioValue="";}
return radioValue;}
else{return col[i].value;}},isArray:function(object){if(!window.Array){return false;}
else{return object.constructor==window.Array;}},listChecked:function(form){var s="";for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.type=="checkbox")&&(e.checked==true)&&(e.value>"")){s+=e.value+",";}}
return s;},listCheckedExcept:function(form,except){var s="";for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.type=="checkbox")&&(e.checked==true)&&(e.value>"")&&(e.name.indexOf(except)!=0)){s+=e.value+",";}}
return s;},listSelect:function(box,delimeter){var s="";if(delimeter==null){delimeter=",";}
if(box==null){return"";}
for(var i=0;i<box.length;i++){if(box.options[i].value>""){s+=box.options[i].value+delimeter;}}
if(s==".none,"){return"";}
else{return s;}},listUncheckedExcept:function(form,except){var s="";for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.type=="checkbox")&&(e.checked==false)&&(e.value>"")&&(e.name.indexOf(except)!=0)){s+=e.value+",";}}
return s;},moveItem:function(fromBox,toBox,sort){var newText=null;var newValue=null;var newOption=null;if(fromBox.selectedIndex>=0){for(var i=0;i<fromBox.length;i++){if(fromBox.options[i].selected){newText=fromBox.options[i].text;newValue=fromBox.options[i].value;newOption=new Option(newText,newValue);toBox[toBox.length]=newOption;}}
for(var i=0;i<toBox.length;i++){for(var j=0;j<fromBox.length;j++){if(fromBox[j].value==toBox[i].value){fromBox[j]=null;break;}}}}
if(newText!=null){if(sort==true){Liferay.Util.sortBox(toBox);}}},processTab:function(id){document.all[id].selection.text=String.fromCharCode(9);document.all[id].focus();},removeItem:function(box,value){if(value==null){for(var i=box.length-1;i>=0;i--){if(box.options[i].selected){box[i]=null;}}}
else{for(var i=box.length-1;i>=0;i--){if(box.options[i].value==value){box[i]=null;}}}},reorder:function(box,down){var si=box.selectedIndex;if(si==-1){box.selectedIndex=0;}
else{sText=box.options[si].text;sValue=box.options[si].value;if((box.options[si].value>"")&&(si>0)&&(down==0)){box.options[si].text=box.options[si-1].text;box.options[si].value=box.options[si-1].value;box.options[si-1].text=sText;box.options[si-1].value=sValue;box.selectedIndex--;}
else if((si<box.length-1)&&(box.options[si+1].value>"")&&(down==1)){box.options[si].text=box.options[si+1].text;box.options[si].value=box.options[si+1].value;box.options[si+1].text=sText;box.options[si+1].value=sValue;box.selectedIndex++;}
else if(si==0){for(var i=0;i<(box.length-1);i++){box.options[i].text=box.options[i+1].text;box.options[i].value=box.options[i+1].value;}
box.options[box.length-1].text=sText;box.options[box.length-1].value=sValue;box.selectedIndex=box.length-1;}
else if(si==(box.length-1)){for(var j=(box.length-1);j>0;j--){box.options[j].text=box.options[j-1].text;box.options[j].value=box.options[j-1].value;}
box.options[0].text=sText;box.options[0].value=sValue;box.selectedIndex=0;}}},resubmitCountdown:function(formName){if(Liferay.Util.submitCountdown>0){Liferay.Util.submitCountdown--;setTimeout("Liferay.Util.resubmitCountdown('"+formName+"')",1000);}
else{Liferay.Util.submitCountdown=0;if(!is_ns_4){document.body.style.cursor="auto";}
var form=document.forms[formName];for(var i=0;i<form.length;i++){var e=form.elements[i];if(e.type&&(e.type.toLowerCase()=="button"||e.type.toLowerCase()=="reset"||e.type.toLowerCase()=="submit")){e.disabled=false;}}}},selectAndCopy:function(el){el.focus();el.select();if(document.all){var textRange=el.createTextRange();textRange.execCommand("copy");}},setBox:function(oldBox,newBox){for(var i=oldBox.length-1;i>-1;i--){oldBox.options[i]=null;}
for(var i=0;i<newBox.length;i++){oldBox.options[i]=new Option(newBox[i].value,i);}
oldBox.options[0].selected=true;},setSelectedValue:function(col,value){for(var i=0;i<col.length;i++){if((col[i].value!="")&&(col[i].value==value)){col.selectedIndex=i;break;}}},setSelectVisibility:function(mode,obj){if(is_ie){if(obj){obj=jQuery.getOne(obj);}
else{obj=document.getElementsByTagName("body")[0];}
selectList=obj.getElementsByTagName("select");for(var i=0;i<selectList.length;i++){selectList[i].style.visibility=mode;}}},slideMaximize:function(id,height,speed){var obj=document.getElementById(id);var reference=obj.getElementsByTagName("DIV")[0];height+=speed;if(height<(reference.offsetHeight)){obj.style.height=height+"px";setTimeout("Liferay.Util.slideMaximize(\""+id+"\","+height+","+speed+")",10);}
else{obj.style.overflow="";obj.style.height="";}},slideMinimize:function(id,height,speed){var obj=document.getElementById(id);height-=speed;if(height>0){obj.style.height=height+"px";setTimeout("Liferay.Util.slideMinimize(\""+id+"\","+height+","+speed+")",10);}
else{obj.style.height="1px";}},sortBox:function(box){var newBox=new Array();for(var i=0;i<box.length;i++){newBox[i]=new Array(box[i].value,box[i].text);}
newBox.sort(Liferay.Util.sortByAscending);for(var i=box.length-1;i>-1;i--){box.options[i]=null;}
for(var i=0;i<newBox.length;i++){box.options[box.length]=new Option(newBox[i][1],newBox[i][0]);}},sortByAscending:function(a,b){if(a[1].toLowerCase()>b[1].toLowerCase()){return 1;}
else if(a[1].toLowerCase()<b[1].toLowerCase()){return-1;}
else{return 0;}},toggleByIdSpan:function(obj,id){var hidden=Liferay.Util.toggle(id,true);var spanText=obj.getElementsByTagName("span");if(hidden){spanText[0].style.display="none";spanText[1].style.display="";}
else{spanText[0].style.display="";spanText[1].style.display="none";}},toggle:function(obj,returnState,displayType){var hidden=false;var display="block";obj=_$J.getOne(obj);if(displayType!=null){display=displayType;}
if(obj!=null){if(!obj.style.display||!obj.style.display.toLowerCase().match("none")){obj.style.display="none";}
else{obj.style.display=display;hidden=true;}}
if(returnState){return hidden;}}};function cloneObject(obj,recurse){for(i in obj){if(typeof obj[i]=='object'&&recurse){this[i]=new cloneObject(obj[i],true);}
else
this[i]=obj[i];}}
Element=new Object();Element.disable=function(element){element=_$J.getOne(element);var items=element.getElementsByTagName("*");for(var i=0;i<items.length;i++){var item=items[i];var nodeName=item.nodeName.toLowerCase();item.onclick=function(){};item.onmouseover=function(){};item.onmouseout=function(){};if(is_ie){item.onmouseenter=function(){};item.onmouseleave=function(){};}
if(nodeName=="a"){item.href="javascript: void(0)";}
else if(nodeName=="input"||nodeName=="select"||nodeName=="script"){item.disabled="true";}
else if(nodeName=="form"){item.action="";item.onsubmit=function(){return false;};}
item.style.cursor="default";}}
Element.changeOpacity=function(object,opacity){opacity=(opacity>=100)?99.999:opacity;opacity=(opacity<0)?0:opacity;object.style.opacity=(opacity/100);object.style.MozOpacity=(opacity/100);object.style.KhtmlOpacity=(opacity/100);object.style.filter="alpha(opacity="+opacity+")";}
Element.remove=function(id){var obj=jQuery.getOne(id);obj.parentNode.removeChild(obj);}
function LinkedList(){this.head=null;this.tail=null;}
LinkedList.prototype.add=function(obj){obj.listInfo=new Object();var tail=this.tail;var head=this.head;if(this.head==null){this.head=obj;this.tail=obj;}
else{this.tail.listInfo.next=obj;obj.listInfo.prev=this.tail;this.tail=obj;}}
LinkedList.prototype.remove=function(obj){if(this.head){var next=obj.listInfo.next;var prev=obj.listInfo.prev;if(next){next.listInfo.prev=prev;}
if(prev){prev.listInfo.next=next;}
if(this.head=obj){this.head=next;}
if(this.tail=obj){this.tail=prev;}}}
LinkedList.prototype.each=function(func){var cur=this.head;var count=0;while(cur){count++;var next=cur.listInfo.next;if(func){func(cur);}
cur=next;}
return count;}
LinkedList.prototype.size=function(){return this.each();}
function startsWith(str,x){if(str.indexOf(x)==0){return true;}
else{return false;}}
function endsWith(str,x){if(str.lastIndexOf(x)==str.length-x.length){return true;}
else{return false;}}
if(is_ns_4){encodeURIComponent=new function(uri){return escape(uri);};decodeURIComponent=new function(uri){return unescape(uri);};}
function submitForm(form,action,singleSubmit){if(Liferay.Util.submitCountdown==0){Liferay.Util.submitCountdown=10;setTimeout("Liferay.Util.resubmitCountdown('"+form.name+"')",1000);if(singleSubmit==null||singleSubmit){Liferay.Util.submitCountdown++;for(var i=0;i<form.length;i++){var e=form.elements[i];if(e.type&&(e.type.toLowerCase()=="button"||e.type.toLowerCase()=="reset"||e.type.toLowerCase()=="submit")){e.disabled=true;}}}
if(action!=null){form.action=action;}
if(!is_ns_4){document.body.style.cursor="wait";}
form.submit();}
else{if(Liferay.Util.submitFormAlert!=null){submitFormAlert(Liferay.Util.submitCountdown);}}}
var Viewport={frame:function(){var x,y;if(self.innerHeight)
{x=self.innerWidth;y=self.innerHeight;}
else if(document.documentElement&&document.documentElement.clientHeight)
{x=document.documentElement.clientWidth;y=document.documentElement.clientHeight;}
else if(document.body)
{x=document.body.clientWidth;y=document.body.clientHeight;}
return(new Coordinate(x,y));},scroll:function(){var x,y;if(self.pageYOffset)
{x=self.pageXOffset;y=self.pageYOffset;}
else if(document.documentElement&&document.documentElement.scrollTop)
{x=document.documentElement.scrollLeft;y=document.documentElement.scrollTop;}
else if(document.body)
{x=document.body.scrollLeft;y=document.body.scrollTop;}
return(new Coordinate(x,y));},page:function(){var x,y;var test1=document.body.scrollHeight;var test2=document.body.offsetHeight
if(test1>test2)
{x=document.body.scrollWidth;y=document.body.scrollHeight;}
else
{x=document.body.offsetWidth;y=document.body.offsetHeight;}
return(new Coordinate(x,y));}}
String.prototype.trim=jQuery.trim;var ZINDEX={ALERT:100,CHAT_BOX:11,DRAG_ITEM:10,DRAG_ARROW:9}
var Accordion=Class.create();Accordion.prototype={initialize:function(container,varName){this.container=container;this.contentList=null;this.headerList=null;this.speed=15;this.timer=null;this.varName=varName;this.headerList=null;this.contentList=null;},animate:function(){var changed=false;var speed=this.speed;this.contentList.each(function(item){if(item.style.height==""){item.style.height=item.offsetHeight+"px";}
if(item.expand){var div=item.getElementsByTagName("div")[0];if(item.offsetHeight<div.offsetHeight){item.style.height=(parseInt(item.style.height)+speed)+"px";changed=true;}}
else{if(item.offsetHeight>speed){item.style.height=(parseInt(item.style.height)-speed)+"px";changed=true;}
else{item.style.height="1px";}}});if(changed){this.timer=setTimeout(this.varName+".animate()",30);}
else{this.timer=0;}},show:function(obj){var self=this;if(this.headerList==null){this.headerList=_$P(".portlet-rss-header");this.contentList=_$P(".portlet-rss-content");}
this.headerList.each(function(i){if(this==obj){self.contentList[i].expand=true;}
else{self.contentList[i].expand=false;}});if(!this.timer){this.timer=setTimeout(this.varName+".animate()",0);}}}
function changeBackground(path,extension){var bodyWidth;if(is_safari){bodyWidth=self.innerWidth;}
else{bodyWidth=document.body.clientWidth;}
if(extension!=null){if(bodyWidth<=1024){document.body.style.backgroundImage="url("+path+"."+extension+")";}
else if(bodyWidth>1024&&bodyWidth<=1280){document.body.style.backgroundImage="url("+path+"-1280."+extension+")";}
else if(bodyWidth>1280){document.body.style.backgroundImage="url("+path+"-1600."+extension+")";}}}
var DragLink={create:function(item,dragId){item.dragId=_$J.getOne(dragId);item.clickLink=item.href;item.href="javascript:void(0)";item.onclick=DragLink.onLinkClick;},onLinkClick:function(){if(this.dragId.wasClicked){if(is_ie){setTimeout("window.location = \""+this.clickLink+"\";",0);}
else{window.location=this.clickLink;}}}}
var DynamicSelect={create:function(url,source,target,callback,query){var returnObj=new Object();returnObj["callback"]=callback;returnObj["target"]=target;source.onchange=function(){loadPage(url,(query?(query+"&"):"")+"sourceValue="+this.value,DynamicSelect.returnFunction,returnObj);}},returnFunction:function(xmlHttpReq,returnObj){var select;var target=returnObj["target"];var callback=returnObj["callback"];try{select=eval("("+xmlHttpReq.responseText+")");}
catch(err){}
target.length=0;if(select.options.length>0){target.disabled=false;var options=select.options;for(var i=0;i<options.length;i++){target.options[i]=new Option(options[i].name,options[i].value);}}
else{target.disabled=true;}
if(callback!=null){callback();}}}
var LiferayDock={MODE:{EXPAND:0,COLLAPSE:1},ORDER:[0,1,4,5,2,8,6,9,3,12,10,7,13,11,14,15],FRAME_C:0.08,GRID:{HEIGHT:4,WIDTH:4},ICON:{HEIGHT:54,WIDTH:54},cached:null,count:0,constants:null,defaultText:"",defaultTimer:0,defaultTimeout:0,dock:null,dockIcons:null,modeTimer:0,dockCoords:new Array(),debug:function(){document.getElementById("dock_debug").innerHTML=this.dockCoords.toSource();},initialize:function(defaultText){var constants=new Array();this.dockCoords[0]=new Array();this.dockCoords[1]=new Array();for(var i=0;i<this.GRID.HEIGHT;i++){for(var j=0;j<this.GRID.WIDTH;j++){var box=new Object();var x=j*(-this.ICON.WIDTH);var y=i*(this.ICON.HEIGHT);var h=Math.sqrt(x*x+y*y);box.h=h;box.x=x;box.y=y;box.lastFrame=h*this.FRAME_C;if(h){box.sin=y/h;box.cos=x/h;}
constants.push(box);}}
for(var i=0;i<16;i++){LiferayDock.dockCoords[0][i]=new Array();LiferayDock.dockCoords[1][i]=new Array();}
var self=this;var dock=_$J("#portal-dock");var dockIcons=_$J(".portal-dock-box",dock);var size=dockIcons.length;this.dock=dock;this.dockIcons=dockIcons;this.constants=constants;this.defaultText=defaultText||"";dock.bind("mouseover",{self:self},this.expand);dock.bind("mouseout",{self:self},this.collapse);dockIcons.each(function(index){_$J(this).bind("mouseout",{self:self},self.collapse);this.constants=self.constants[self.ORDER[index]];this.style.zIndex=size-index;});var myPlaces=_$J(".portal-dock-my-places:first").find("table:first").unbind("mouseover");this.cached=LiferayDockCached;},setMode:function(mode){this.direction=mode;if(!this.timer){this.timer=setTimeout("LiferayDock.animate()",1);clearTimeout(this.defaultTimer);if(mode==LiferayDock.MODE.COLLAPSE){this.defaultTimer=setTimeout("LiferayDock.showText(\""+this.defaultText+"\", 0)",this.defaultTimeout);}}},showText:function(text,defaultTimeout){var textBox=document.getElementById("portal-dock-text");this.showObject(textBox);textBox.innerHTML=text;this.defaultTimeout=(defaultTimeout||1)*1000;},showObject:function(item,defaultTimeout){item=_$J.getOne(item);_$J(".portal-dock-help").each(function(){if(item.id==this.id){this.style.display="";}
else{this.style.display="none";}});if(item.id=="portal-dock-my-places"){item.getElementsByTagName("table")[0].onmouseover=function(){MyPlaces.show();this.onmouseover=function(){};};}
this.defaultTimeout=(defaultTimeout||0)*1000;},collapse:function(event){var self=event.data.self;if(self.modeTimer){clearTimeout(self.modeTimer);}
self.modeTimer=setTimeout("LiferayDock.setMode(LiferayDock.MODE.COLLAPSE)",200);},expand:function(event){var self=event.data.self;if(self.modeTimer){clearTimeout(self.modeTimer);}
self.modeTimer=setTimeout("LiferayDock.setMode(LiferayDock.MODE.EXPAND)",100);},animate:function(obj){var collapse=(this.direction==this.MODE.COLLAPSE);var count=this.count;var updated=false;var cached=this.cached;this.dockIcons.each(function(index){var item=this;if(item.constants.h){if(count<=item.constants.lastFrame){if(!cached){var ratio=count/item.constants.lastFrame;var dist=item.constants.h*ratio;var maxRad;}
if(collapse){if(cached){item.style.left=cached[1][index][count][0]+"px";item.style.top=cached[1][index][count][1]+"px";}
else{maxRad=Math.PI/2;distRatio=1+Math.sin((ratio*maxRad)-(Math.PI/2));item.style.left=(distRatio*(item.constants.x))+"px";item.style.top=(distRatio*(item.constants.y))+"px";}}
else{if(cached){item.style.left=cached[0][index][count][0]+"px";item.style.top=cached[0][index][count][1]+"px";}
else{maxRad=Math.PI/2+Math.PI/8;distRatio=Math.sin(ratio*maxRad);item.style.left=(distRatio*(item.constants.x/Math.sin(maxRad)))+"px";item.style.top=(distRatio*(item.constants.y/Math.sin(maxRad)))+"px";}}
updated=true;}
else{item.style.left=item.constants.x+"px";item.style.top=item.constants.y+"px";}}});if(collapse&&count>0){this.count--;this.timer=setTimeout("LiferayDock.animate()",30);}
else if(!collapse&&updated){this.count++;this.timer=setTimeout("LiferayDock.animate()",30);}
else{this.timer=0;}}}
var LayoutColumns={arrow:null,portletCount:0,current:null,doAsUserId:"",freeform:false,highlight:"transparent",layoutMaximized:"",plid:"",displayArrow:function(mode,left,top){var arrow=LayoutColumns.arrow
if(!arrow){arrow=new Object();var arrowUp=document.createElement("div");arrowUp.style.zIndex=ZINDEX.DRAG_ARROW;arrowUp.style.display="none";arrowUp.className="layout-column-arrow-up";var arrowDown=document.createElement("div");arrowDown.style.zIndex=ZINDEX.DRAG_ARROW;arrowDown.style.display="none";arrowDown.className="layout-column-arrow-down";document.body.appendChild(arrowUp);document.body.appendChild(arrowDown);arrow.up=arrowUp;arrow.down=arrowDown;LayoutColumns.arrow=arrow;}
if(mode=="up"){arrow.up.style.top=top+"px";arrow.up.style.left=left+"px";arrow.up.style.display="";arrow.down.style.display="none";}
else if(mode=="down"){arrow.down.style.top=top+"px";arrow.down.style.left=left+"px";arrow.down.style.display="";arrow.up.style.display="none";}
else if(mode=="none"){arrow.down.style.display="none";arrow.up.style.display="none";}},findPosition:function(portlet){var position=-1;_$J(".portlet-boundary",portlet.parentNode).each(function(i){if(this==portlet){position=i;}});return position;},init:function(colArray){for(var i=0;i<colArray.length;i++){var column=_$J.getOne("#layout-column_"+colArray[i]);if(column){column.columnId=colArray[i];if(this.freeform){var boxes=_$J(".portlet-boundary",column).each(function(){LayoutColumns.initPortlet(this);});}
else{DropZone.add(column,{accept:["portlet-boundary"],onDrop:LayoutColumns.onDrop,onHoverOver:LayoutColumns.onHoverOver,onHoverOut:function(){LayoutColumns.displayArrow("none");},inheritParent:true});var boxes=_$J(".portlet-boundary",column).each(function(){if(!this.isStatic){LayoutColumns.initPortlet(this);}});}}}},initPortlet:function(portlet){portlet=_$J.getOne(portlet);var handle=_$J(".portlet-header-bar, .portlet-title-default",portlet).get(0);handle.style.cursor="move";if(this.freeform){portlet.style.position="absolute";Drag.makeDraggable(portlet,handle);portlet.threshold=5;portlet.onDragStart=function(){this.wasClicked=true;this.style.zIndex=99;}
portlet.onDrag=function(){this.wasClicked=false;}
portlet.onDragEnd=function(){if(!this.wasClicked){var left=parseInt(this.style.left);var top=parseInt(this.style.top);left=Math.round(left/10)*10;top=Math.round(top/10)*10;this.style.left=left+"px";this.style.top=top+"px";LayoutColumns.moveToTop(this);LayoutColumns.savePosition(this);}
this.style.zIndex="";}
var contents=_$J(".portlet-container",portlet).get(0);contents.container=portlet;contents.onclick=function(){if(LayoutColumns.current!=this.container){LayoutColumns.moveToTop(this.container);LayoutColumns.savePosition(this.container);LayoutColumns.current=this.container;}}
var resizeHandleList=_$J(".portlet-resize-handle",portlet).get(0);if(resizeHandleList.length>0){var resizeHandle=resizeHandleList[0];var resizeBox=document.getElementById("p_p_body_"+portlet.portletId);var portletResize=Resize.createHandle(resizeHandle,null,function(){});var minimized=resizeBox.style.height=="1px";portletResize.addRule(new ResizeRule(resizeBox,Resize.HORIZONTAL,Resize.ADD));portletResize.addRule(new ResizeRule(resizeBox,Resize.VERTICAL,Resize.ADD));resizeHandle.container=portlet;resizeHandle.onResizeStart=function(){LayoutColumns.moveToTop(this.container);}
resizeHandle.onResizeEnd=function(){var portlet=this.container;var resizeBox=document.getElementById("p_p_body_"+portlet.portletId);var height=parseInt(resizeBox.style.height);var width=parseInt(resizeBox.style.width);height=Math.round(height/10)*10;width=Math.round(width/10)*10;resizeBox.style.height=height+"px";resizeBox.style.width=width+"px";LayoutColumns.savePosition(portlet);}
if(portlet.freeformStyles){_$J(portlet).css(portlet.freeformStyles.position);_$J(resizeBox).css(portlet.freeformStyles.dimensions);if(minimized){resizeBox.style.height="1px";}}
else{portlet.style.top=(20*this.portletCount)+"px";portlet.style.left=(20*this.portletCount++)+"px";resizeBox.style.width="300px";}}}
else{DragDrop.create(portlet,{revert:true,handle:handle,ghosting:true,highlightDropzones:LayoutColumns.highlight});}},moveToTop:function(portlet){var container=portlet.parentNode;portlet.oldPosition=this.findPosition(portlet);container.removeChild(portlet);container.appendChild(portlet);},onDrop:function(item){var dropOptions=this;var container=dropOptions.dropItem;var insertBox=null;item.dragOptions.clone.isStatic="yes";_$J(".portlet-boundary",container).each(function(i){var box=this;if(!box.isStatic){var nwOffset=Coordinates.northwestOffset(box,true);var midY=nwOffset.y+(box.offsetHeight/2);if(mousePos.y<midY){insertBox=box;return false;}}
else if(box.isStatic.match("end")){insertBox=box;return false;}});Element.remove(item);container.insertBefore(item,insertBox);item.dragOptions.revert=false;item.style.position="";item.style.left="";item.style.top="";item.style.height="";item.style.width="100%";var newPosition=0;_$J(".portlet-boundary",container).each(function(i){var box=this;if(!box.isStatic){if(box==item){return false;}
newPosition++;}});LayoutColumns.displayArrow("none");movePortlet(LayoutColumns.plid,item.portletId,container.columnId,newPosition,LayoutColumns.doAsUserId);},onHoverOver:function(item){var dropOptions=this;var container=dropOptions.dropItem;var insertBox=null;var bottom=true;var inside;var lastBox;_$J(".portlet-boundary",container).each(function(){var box=this;if(!box.isStatic){lastBox=box;inside=mousePos.insideObject(box,true);if(inside){var midY=box.offsetHeight/2;if(inside.y<=midY||box==item.dragOptions.clone){bottom=false;}
else{bottom=true;}
insertBox=box;return false;}}
else if(box.isStatic.match("end")){insertBox=box;return false;}});var top;var left;if(insertBox){left=inside.nwOffset.x+20;if(bottom){top=inside.nwOffset.y+insertBox.offsetHeight-50;LayoutColumns.displayArrow("down",left,top);}
else{top=inside.nwOffset.y;LayoutColumns.displayArrow("up",left,top);}}
else{if(lastBox){var nwOffset=Coordinates.northwestOffset(lastBox,true);top=nwOffset.y+lastBox.offsetHeight-50;left=nwOffset.x+20;LayoutColumns.displayArrow("down",left,top);}
else{var nwOffset=Coordinates.northwestOffset(container,true);top=nwOffset.y;left=nwOffset.x+20;LayoutColumns.displayArrow("up",left,top);}}},savePosition:function(portlet){var resizeBox=document.getElementById("p_p_body_"+portlet.portletId);var newPosition=this.findPosition(portlet);if(newPosition!=portlet.oldPosition){movePortlet(LayoutColumns.plid,portlet.portletId,portlet.parentNode.columnId,newPosition,LayoutColumns.doAsUserId);}
if(resizeBox){AjaxUtil.request(themeDisplay.getPathMain()+"/portal/update_layout?plid="+LayoutColumns.plid+"&height="+resizeBox.offsetHeight+"px"+"&width="+resizeBox.offsetWidth+"px"+"&top="+portlet.style.top+"&left="+portlet.style.left+"&p_p_id="+portlet.portletId+"&doAsUserId="+LayoutColumns.doAsUserId+"&cmd=drag");}}}
var NavFlyout={zIndex:1,initialize:function(nav){var nav=_$J.getOne(nav);var navMapList=_$J("portlet-nav-map-list",nav);navMapList.not(".portlet-nav-map-level_1, .portlet-nav-map-level_2").css({position:"absolute",display:"none"});_$J(".portlet-nav-map-list a",nav).each(function(){var item=_$J(this.parentNode.parentNode);if(item.is(".portlet-nav-map-level_1")){item.mouseover(function(){NavFlyout.hide(this.parentNode);});}
else{item.mouseover(NavFlyout.onHoverOver);}});},initToggle:function(nav,imgSrc){var nav=_$J.getOne(nav);var navMapList=_$J(".portlet-nav-map-level_1 > li",nav);navMapList.click(NavFlyout.onToggle);navMapList.css({backgroundImage:"url("+imgSrc+")"});},hide:function(listItem){NavFlyout.initialize(listItem.parentNode);},onHoverOver:function(){var listItem=this.parentNode;if(_$J(listItem.parentNode).is(".portlet-nav-map-level_2")){NavFlyout.hide(listItem.parentNode.parentNode.parentNode);}
else{NavFlyout.hide(listItem);}
_$J(listItem.childNodes).filter("ul").css({display:"block",top:"5px",left:"100px"});zItem=listItem;while(zItem.nodeName.toLowerCase()!="div"){if(zItem.nodeName.toLowerCase()=="li"){zItem.style.zIndex=NavFlyout.zIndex;}
zItem=zItem.parentNode;}
NavFlyout.zIndex++;},onToggle:function(){var subMenu=_$J("ul:first",this).get(0);if(this.isShowing){subMenu.style.display="none";this.style.backgroundImage=this.style.backgroundImage.replace(/02_minus/,"02_plus");this.isShowing=false;}
else{subMenu.style.display="block";subMenu.style.backgroundImage="none";this.style.backgroundImage=this.style.backgroundImage.replace(/02_plus/,"02_minus");this.isShowing=true;}}}
var Navigation={params:new Object(),lastMoved:null,reordered:null,addPage:function(){var params=Navigation.params;var url=themeDisplay.getPathMain()+"/layout_management/update_page?cmd=add"+"&groupId="+params.groupId+"&private="+params.isPrivate+"&parent="+params.parent+"&mainPath="+encodeURIComponent(themeDisplay.getPathMain())+"&doAsUserId="+themeDisplay.getDoAsUserIdEncoded();AjaxUtil.request(url,{onComplete:function(xmlHttpReq){var jo=$J(xmlHttpReq.responseText);window.location=jo.url+"&newPage=1";}});},removePage:function(){var tab=_$J("#layout-tab-selected").get(0);var tabText=_$J("#layout-tab-text-edit").get(0).innerHTML;var params=Navigation.params;if(confirm("Remove "+tabText+"\"?")){var url=themeDisplay.getPathMain()+"/layout_management/update_page?cmd=delete"+"&ownerId="+params.ownerId+"&layoutId="+params.layoutId;AjaxUtil.request(url,{onComplete:function(){window.location=themeDisplay.getURLHome();}});}},init:function(params){Navigation.params=params;QuickEdit.create("layout-tab-text-edit",{dragId:"layout-tab-selected",fixParent:true,onEdit:function(input,textWidth){var parent=input.parentNode;var delLink=document.createElement("a");delLink.innerHTML="X";delLink.href="javascript:Navigation.removePage()";delLink.className="layout-tab-close";parent.className="layout-tab-text-editing";input.style.width=(textWidth+20)+"px";_$J(input).addClass("layout-tab-input");parent.insertBefore(delLink,input);},onComplete:function(newTextObj,oldText){var parent=newTextObj.parentNode;var delLink=_$J(".layout-tab-close:last",parent).get(0);var newText=newTextObj.innerHTML;parent.className="layout-tab-text";if(newText==""){newTextObj.innerHTML=newText="(UNTITLED)";}
delLink.style.display="none";if(oldText!=newText){var params=Navigation.params;var url=themeDisplay.getPathMain()+"/layout_management/update_page?cmd=title&title="+encodeURIComponent(newText)+"&ownerId="+params.ownerId+"&language="+params.language+"&layoutId="+params.layoutId;AjaxUtil.request(url);}}});DropZone.add("layout-nav-container",{accept:["layout-tab"],onHoverOver:Navigation.onDrag,onDrop:Navigation.onDrop});_$J("#layout-nav-container .layout-tab").each(function(i){var item=this;var link=item.getElementsByTagName("a");if(link.length>0){link[0].style.cursor="pointer";}
DragDrop.create(item,{forceDrop:true,revert:true});item.layoutId=Navigation.params.layoutIds[i];item.style.cursor="move";var links=item.getElementsByTagName("a");if(links.length>0){DragLink.create(links[0],item);}});if(Navigation.params.newPage){var opts=_$J("#layout-tab-text-edit").get(0).editOptions;_$J("#"+opts.dragId).get(0).wasClicked=true;QuickEdit.edit(_$J("#layout-tab-text-edit").get(0));}},move:function(obj,from,to){var tabs=_$J("#layout-nav-container .layout-tab").get();var selectedTab=obj;var nav=document.getElementById("layout-nav-container");var target;Element.remove(selectedTab);if(from>to){target=tabs[to];}
else{if(to==tabs.length-1){target=_$J("#layout-tab-add").get(0);}
else{target=tabs[to+1];}}
nav.insertBefore(selectedTab,target);},onDrag:function(item){var dragOptions=item.dragOptions;var clone=dragOptions.clone;var fromIndex=-1;var toIndex=-1;clone.layoutId=item.layoutId;_$J("#layout-nav-container .layout-tab").each(function(index){var tab=this;if(tab==clone){fromIndex=index;}
if(mousePos.insideObject(tab,true)){if(tab!=clone){if(tab!=Navigation.lastMoved){toIndex=index;Navigation.lastMoved=tab;}}
else{Navigation.lastMoved=null;}}});if(fromIndex>=0&&toIndex>=0){Navigation.move(clone,fromIndex,toIndex);}},onDrop:function(item){var reordered=new Array();tabs=_$J("#layout-nav-container .layout-tab").each(function(i){reordered[i]=this.layoutId;});Navigation.reordered=reordered;if(Navigation.reordered){var reordered=Navigation.reordered;var params=Navigation.params;var url=themeDisplay.getPathMain()+"/layout_management/update_page?cmd=reorder"+"&ownerId="+params.ownerId+"&parent="+params.parent+"&layoutIds="+reordered.concat(Navigation.params.hiddenIds);AjaxUtil.request(url);}}}
var PortletHeaderBar={fadeIn:function(id){var bar=document.getElementById(id);if(bar==null)
return;if(bar.startOut){clearTimeout(bar.timerOut);bar.timerOut=0;}
bar.startOut=false;bar.startIn=true;bar.opac+=20;for(var i=0;i<bar.iconList.length;i++){Element.changeOpacity(bar.iconList[i],bar.opac);}
bar.iconBar.style.display="block";if(bar.opac<100){bar.timerIn=setTimeout("PortletHeaderBar.fadeIn(\""+id+"\")",50);}
else{bar.timerIn=0;bar.startIn=false;}},fadeOut:function(id){var bar=document.getElementById(id);if(bar==null)
return;if(bar.startIn){clearTimeout(bar.timerIn);bar.timerIn=0;}
bar.startIn=false;bar.startOut=true;bar.opac-=20;for(var i=0;i<bar.iconList.length;i++){Element.changeOpacity(bar.iconList[i],bar.opac);}
bar.iconBar.style.display="block";if(bar.opac>0){bar.timerOut=setTimeout("PortletHeaderBar.fadeOut(\""+id+"\")",50);}
else{bar.iconBar.style.display="none";bar.timerOut=0;bar.startOut=false;}},init:function(bar){if(!bar.iconBar){bar.iconBar=_$J(".portlet-small-icon-bar:first",bar).get(0);}
if(!bar.iconList){bar.iconList=bar.iconBar.getElementsByTagName("img");}},hide:function(id){var bar=document.getElementById(id);if(bar.timerIn&&!bar.startIn){clearTimeout(bar.timerIn);bar.timerIn=0;}
if(!bar.startOut&&bar.opac>0){if(bar.timerOut){clearTimeout(bar.timerOut);bar.timerOut=0;}
this.init(bar);bar.timerOut=setTimeout("PortletHeaderBar.fadeOut(\""+id+"\")",150);}},show:function(id){var bar=document.getElementById(id);if(bar.timerOut&&!bar.startOut){clearTimeout(bar.timerOut);bar.timerOut=0;}
if(!bar.startIn&&(!bar.opac||bar.opac<100)){if(!bar.opac){bar.opac=0;}
if(bar.timerIn){clearTimeout(bar.timerIn);bar.timerIn=0;}
this.init(bar);bar.timerIn=setTimeout("PortletHeaderBar.fadeIn(\""+id+"\")",150);}}}
var PhotoSlider=Class.create();PhotoSlider.prototype={initialize:function(slidingWindow,windowWidth,photos,totalPages,varName){this.TOTAL_FRAMES=20;this.count=0;this.page=0;this.timer=0;this.start=0;this.photos=_$J.getOne(photos);this.photos.style.position="relative";this.photos.style.left="0px";this.slidingWindow=_J$.getOne(slidingWindow);this.windowWidth=windowWidth;this.totalPages=totalPages;this.varName=varName;},animate:function(){if(this.count<=this.TOTAL_FRAMES){var ratio=this.count/this.TOTAL_FRAMES;var ratio2=Math.sin(ratio*(Math.PI/2))
var delta=-(this.page*this.windowWidth)-this.start;this.photos.style.left=this.start+(delta*ratio2);this.count++;this.timer=setTimeout(this.varName+".animate()",30);}
else{this.timer=0;}},left:function(){this.start=parseInt(this.photos.style.left);if(this.page>0){this.page--;this.count=0;if(!this.timer){this.timer=setTimeout(this.varName+".animate()",30);}}},right:function(){this.start=parseInt(this.photos.style.left);if(this.page<(this.totalPages-1)){this.page++
this.count=0;if(!this.timer){this.timer=setTimeout(this.varName+".animate()",30);}}}}
var Tabs={show:function(namespace,names,id){var el=document.getElementById(namespace+id+"TabsId");if(el){el.className="current";}
el=document.getElementById(namespace+id+"TabsSection");if(el){el.style.display="block";}
for(var i=0;(names.length>1)&&(i<names.length);i++){if(id!=names[i]){el=document.getElementById(namespace+names[i]+"TabsId");if(el){el.className="none";}
el=document.getElementById(namespace+names[i]+"TabsSection");if(el){el.style.display="none";}}}}}
var QuickEdit={inputList:new LinkedList(),create:function(id,options){var item=document.getElementById(id);item.editOptions=options;item.onclick=function(){QuickEdit.edit(this);};item.style.cursor="text";if(options.dragId){_$J.getOne(options.dragId).wasClicked=true;}},edit:function(textObj){var opts=textObj.editOptions||new Object();var wasClicked=true;var isTextarea=false;if(opts.dragId){wasClicked=_$J.getOne(opts.dragId).wasClicked?true:false;}
if(opts.inputType&&opts.inputType=="textarea"){isTextarea=true;}
if(!textObj.editing&&wasClicked){var input;var textDiv=textObj.parentNode;if(isTextarea){input=document.createElement("textarea");}
else{input=document.createElement("input");}
if(opts.fixParent){textDiv.style.width=textDiv.offsetWidth+"px";}
input.className="portlet-form-input-field";input.value=encodeURIComponent(textObj.innerHTML);input.textObj=textObj;input.onmouseover=function(){document.onclick=function(){};}
input.onmouseout=function(){document.onclick=function(){QuickEdit.inputList.each(QuickEdit.onDone)};}
_$J(input).bind("keydown",function(event){if(!isTextarea&&event.keyCode==13){QuickEdit.inputList.each(QuickEdit.onDone);}});var textWidth=textObj.offsetWidth;var textHeight=textObj.offsetHeight;textObj.style.display="none";textDiv.appendChild(input);if(opts.onEdit){opts.onEdit(input,textWidth,textHeight);}
input.focus();QuickEdit.inputList.add(input);if(opts.dragId){_$J.getOne(opts.dragId).disableDrag=true;}
textObj.editing=true;}},onDone:function(input){if(input){document.onclick=function(){};var textObj=input.textObj;var textDiv=textObj.parentNode;var newText=decodeURIComponent(input.value);var oldText=textObj.innerHTML;var opts=textObj.editOptions;textObj.innerHTML=newText;if(opts.onComplete){opts.onComplete(textObj,oldText);}
Element.remove(input);textObj.style.display="";textObj.editing=false;if(opts.dragId){_$J.getOne(opts.dragId).disableDrag=false;}
if(opts.fixParent){textDiv.style.width="auto";}
QuickEdit.inputList.remove(input);}}}
var StarRating=new Class({initialize:function(id,options){this.options=options||new Object();this.rating=this.options.rating||0;var item=_$J("#"+id);this.stars=item.find("img");var self=this;if(!this.options.displayOnly){item.bind("mouseout",{self:this},this.onHoverOut);this.stars.each(function(index){this.index=index+1;_$J(this).bind("click",{self:self},self.onClick).bind("mouseover",{self:self},self.onHoverOver);})}
this.display(this.rating,"rating");}});StarRating.implement({display:function(rating,mode){var self=this;rating=rating==null?this.rating:rating;var whole=Math.floor(rating);var fraction=rating-whole;this.stars.each(function(index){image=this;if(index<whole){if(mode=="hover"){image.src=image.src.replace(/\bstar_.*\./,"star_hover.");}
else{image.src=image.src.replace(/\bstar_.*\./,"star_on.");}}
else{if(fraction<0.25){image.src=image.src.replace(/\bstar_.*\./,"star_off.");}
else if(fraction<0.50){image.src=image.src.replace(/\bstar_.*\./,"star_on_quarter.");}
else if(fraction<0.75){image.src=image.src.replace(/\bstar_.*\./,"star_on_half.");}
else if(fraction<1.00){image.src=image.src.replace(/\bstar_.*\./,"star_on_threequarters.");}
fraction=0;}});},onHoverOver:function(event){event.data.self.display(this.index,"hover");},onHoverOut:function(event){event.data.self.display();},onClick:function(event){var target=this;var newRating=target.index;var self=event.data.self;self.rating=newRating;if(self.options.onComplete){self.options.onComplete(newRating);}
self.display(newRating);}});var ToolTip={current:null,opacity:100,show:function(event,obj,text){mousePos.update(event);var target=obj;var tip=ToolTip.current;target.onmouseout=ToolTip.hide;if(!tip){var tip=document.createElement("div");tip.className="portal-tool-tip";tip.style.position="absolute";tip.style.cursor="default";document.body.appendChild(tip);ToolTip.current=tip;}
tip.innerHTML=text;tip.style.display="";tip.style.top=(mousePos.y-15)+"px";tip.style.left=(mousePos.x+15)+"px";},hide:function(event){if(ToolTip.current){ToolTip.current.style.display="none";}},fadeOut:function(){if(ToolTip.current){var tip=ToolTip.current;var opacity=ToolTip.opacity;if(opacity>0&&opacity<100){ToolTip.opacity-=20;Element.changeOpacity(tip,ToolTip.opacity);ToolTip.timeout=setTimeout("ToolTip.fadeOut()",30);}
else{Element.changeOpacity(tip,100);if(opacity<=0){ToolTip.current.style.display="none";}}}}}
var LiferayDockCached=[[[],[[-0,0],[-26,0],[-46,0],[-57,0],[-57,0]],[[-0,0],[-0,26],[-0,46],[-0,57],[-0,57]],[[-0,0],[-18,18],[-35,35],[-48,48],[-56,56],[-58,58],[-55,55]],[[-0,0],[-26,0],[-51,0],[-74,0],[-92,0],[-106,0],[-114,0],[-117,0],[-113,0]],[[-0,0],[-0,26],[-0,51],[-0,74],[-0,92],[-0,106],[-0,114],[-0,117],[-0,113]],[[-0,0],[-24,12],[-46,23],[-67,33],[-85,42],[-99,50],[-110,55],[-116,58],[-117,58],[-113,57]],[[-0,0],[-12,24],[-23,46],[-33,67],[-42,85],[-50,99],[-55,110],[-58,116],[-58,117],[-57,113]],[[-0,0],[-26,0],[-52,0],[-77,0],[-100,0],[-120,0],[-138,0],[-153,0],[-164,0],[-172,0],[-175,0],[-175,0],[-170,0]],[[-0,0],[-0,26],[-0,52],[-0,77],[-0,100],[-0,120],[-0,138],[-0,153],[-0,164],[-0,172],[-0,175],[-0,175],[-0,170]],[[-0,0],[-19,19],[-37,37],[-54,54],[-70,70],[-84,84],[-96,96],[-105,105],[-112,112],[-116,116],[-117,117],[-115,115],[-110,110]],[[-0,0],[-25,8],[-50,17],[-73,24],[-95,32],[-115,38],[-133,44],[-148,49],[-160,53],[-169,56],[-174,58],[-175,58],[-173,58],[-168,56]],[[-0,0],[-8,25],[-17,50],[-24,73],[-32,95],[-38,115],[-44,133],[-49,148],[-53,160],[-56,169],[-58,174],[-58,175],[-58,173],[-56,168]],[[-0,0],[-22,15],[-44,29],[-65,43],[-85,56],[-103,69],[-120,80],[-135,90],[-148,99],[-159,106],[-167,111],[-172,115],[-175,117],[-175,117],[-172,115],[-166,111]],[[-0,0],[-15,22],[-29,44],[-43,65],[-56,85],[-69,103],[-80,120],[-90,135],[-99,148],[-106,159],[-111,167],[-115,172],[-117,175],[-117,175],[-115,172],[-111,166]],[[-0,0],[-19,19],[-37,37],[-55,55],[-73,73],[-89,89],[-105,105],[-120,120],[-133,133],[-144,144],[-154,154],[-162,162],[-168,168],[-173,173],[-175,175],[-175,175],[-174,174],[-170,170],[-164,164]]],[[],[[-0,0],[-4,0],[-14,0],[-29,0],[-48,0]],[[-0,0],[-0,4],[-0,14],[-0,29],[-0,48]],[[-0,0],[-2,2],[-7,7],[-15,15],[-26,26],[-39,39],[-52,52]],[[-0,0],[-2,0],[-7,0],[-16,0],[-27,0],[-42,0],[-58,0],[-76,0],[-95,0]],[[-0,0],[-0,2],[-0,7],[-0,16],[-0,27],[-0,42],[-0,58],[-0,76],[-0,95]],[[-0,0],[-1,1],[-6,3],[-13,6],[-22,11],[-34,17],[-47,24],[-63,31],[-79,40],[-96,48]],[[-0,0],[-1,1],[-3,6],[-6,13],[-11,22],[-17,34],[-24,47],[-31,63],[-40,79],[-48,96]],[[-0,0],[-1,0],[-5,0],[-11,0],[-19,0],[-29,0],[-41,0],[-55,0],[-70,0],[-87,0],[-105,0],[-124,0],[-143,0]],[[-0,0],[-0,1],[-0,5],[-0,11],[-0,19],[-0,29],[-0,41],[-0,55],[-0,70],[-0,87],[-0,105],[-0,124],[-0,143]],[[-0,0],[-1,1],[-4,4],[-8,8],[-14,14],[-22,22],[-31,31],[-41,41],[-52,52],[-65,65],[-78,78],[-91,91],[-105,105]],[[-0,0],[-1,0],[-4,1],[-10,3],[-17,6],[-26,9],[-37,12],[-50,17],[-64,21],[-79,26],[-96,32],[-113,38],[-131,44],[-150,50]],[[-0,0],[-0,1],[-1,4],[-3,10],[-6,17],[-9,26],[-12,37],[-17,50],[-21,64],[-26,79],[-32,96],[-38,113],[-44,131],[-50,150]],[[-0,0],[-1,1],[-3,2],[-7,5],[-13,9],[-20,13],[-29,19],[-39,26],[-50,33],[-62,42],[-76,50],[-90,60],[-105,70],[-120,80],[-136,91],[-153,102]],[[-0,0],[-1,1],[-2,3],[-5,7],[-9,13],[-13,20],[-19,29],[-26,39],[-33,50],[-42,62],[-50,76],[-60,90],[-70,105],[-80,120],[-91,136],[-102,153]],[[-0,0],[-1,1],[-2,2],[-5,5],[-9,9],[-15,15],[-21,21],[-28,28],[-37,37],[-46,46],[-56,56],[-67,67],[-78,78],[-91,91],[-103,103],[-116,116],[-130,130],[-144,144],[-157,157]]]];function AjaxRequest(url,options){var xmlHttpReq;var opts=options;var returnArgs=opts.returnArgs;var method=opts.method;var ajaxId=opts.ajaxId;if(window.XMLHttpRequest){xmlHttpReq=new XMLHttpRequest();if(xmlHttpReq.overrideMimeType){xmlHttpReq.overrideMimeType("text/html");}}
else if(window.ActiveXObject){try{xmlHttpReq=new ActiveXObject("Msxml2.XMLHTTP");}
catch(e){try{xmlHttpReq=new ActiveXObject("Microsoft.XMLHTTP");}
catch(e){try{xmlHttpReq=new XMLHttpRequest();}
catch(e){}}}}
var onComplete=opts.onComplete;var returnFunction=function(){if(xmlHttpReq.readyState==4){try{if(xmlHttpReq.status==200){var ajaxId=xmlHttpReq.getResponseHeader("Ajax-ID");if(onComplete){onComplete(xmlHttpReq,returnArgs);}
if(ajaxId&&ajaxId!=""){AjaxUtil.remove(parseInt(ajaxId));}}}
catch(e){}}}
var send=function(url){var urlArray=url.split("?");var path=urlArray[0];var query=urlArray[1];try{if(method=="get"){xmlHttpReq.open("GET",url,true);xmlHttpReq.onreadystatechange=returnFunction;xmlHttpReq.send("");}
else{xmlHttpReq.open("POST",path,true);xmlHttpReq.setRequestHeader("Method","POST "+path+" HTTP/1.1");xmlHttpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xmlHttpReq.setRequestHeader("Ajax-ID",ajaxId);xmlHttpReq.onreadystatechange=returnFunction;xmlHttpReq.send(query);}}
catch(e){}}
send(url);this.resend=function(url,options){opts=options;onComplete=opts.onComplete;send(url);};this.getId=function(){return ajaxId;};this.cleanUp=function(){xmlHttpReq.onreadystatechange=function(){};returnFunction=null;returnArgs=null;xmlHttpReq=null;};}
var AjaxUtil={counter:1,requests:new Array(),request:function(url,options){var opts=(options==null)?(new Object()):options;var ajaxId=(opts.reverseAjax)?0:AjaxUtil.getNextId();opts.ajaxId=ajaxId;var request;if(ajaxId==0&&AjaxUtil.requests[0]){request=AjaxUtil.requests[0];request.resend(url,opts);}
else{request=new AjaxRequest(url,opts);AjaxUtil.requests[ajaxId]=request;}
if(!opts.onComplete){AjaxUtil.remove(ajaxId);}},update:function(url,id,options){var element=_$J.getOne(id);if(element){if(options==null){options=new Object();}
var origOnComplete=options.onComplete;options.onComplete=function(xmlHttpReq,returnArgs){element.innerHTML=xmlHttpReq.responseText;executeLoadedScript(element);if(origOnComplete){origOnComplete();}}
AjaxUtil.request(url,options);}},getNextId:function(){var id=AjaxUtil.counter++;if(AjaxUtil.counter>20){AjaxUtil.counter=1;}
return id;},remove:function(id){if(id){var request=AjaxUtil.requests[id];if(request){request.cleanUp();request=null;}}}}
var ReverseAjax={initialize:function(){_$J(window).unload(ReverseAjax.release);ReverseAjax.request();},request:function(){AjaxUtil.request(themeDisplay.getPathMain()+"/portal/reverse_ajax",{onComplete:ReverseAjax.response,reverseAjax:true});},response:function(xmlHttpRequest){var res=$J(xmlHttpRequest.responseText);var status=res.status;if(status&&status!="failure"){if(status=="success"){if(res.chatMessages){Messaging.getChatsReturn(res.chatMessages);}
if(res.chatRoster){MessagingRoster.getEntriesReturn(res.chatRoster);}}
ReverseAjax.request();}},release:function(){AjaxUtil.request(themeDisplay.getPathMain()+"/portal/reverse_ajax?release=1",{reverseAjax:true});}}
function $J(JSONText){return eval("("+JSONText+")");}
function executeLoadedScript(el){var scripts=el.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){if(scripts[i].src){var head=document.getElementsByTagName("head")[0];var scriptObj=document.createElement("script");scriptObj.setAttribute("type","text/javascript");scriptObj.setAttribute("src",scripts[i].src);head.appendChild(scriptObj);}
else{try{if(is_safari){eval(scripts[i].innerHTML);}
else if(is_mozilla){eval(scripts[i].textContent);}
else{eval(scripts[i].text);}}
catch(e){}}}}
function loadForm(form,action,elId,returnFunction){var pos=action.indexOf("?");var path=action;var queryString="";if(pos!=-1){path=action.substring(0,pos);queryString=action.substring(pos+1,action.length);}
if(!endsWith(queryString,"&")){queryString+="&";}
for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if((e.name!=null)&&(e.value!=null)){queryString+=e.name+"="+encodeURIComponent(e.value)+"&";}}
if(elId!=null){document.body.style.cursor="wait";pos=path.indexOf("/portal/layout");path=path.substring(0,pos)+"/portal/render_portlet";returnFunction=function(xmlHttpReq){document.getElementById(elId).innerHTML=xmlHttpReq.responseText;document.body.style.cursor="default";};}
loadPage(path,queryString,returnFunction);}
function loadPage(path,queryString,returnFunction,returnArgs){AjaxUtil.request(path+"?"+queryString,{onComplete:returnFunction,returnArgs:returnArgs});}
function printJSON(data){if(data&&data.id){var target=document.getElementById(data.id);if(target){target.innerHTML=data.toString();}}}
var Alerts={background:null,message:null,messageArray:new Array(),fadeTimer:0,OPACITY:51,STEPS:3,bgFadeIn:function(max,steps,opacity){var background=Alerts.background;var delta=max/steps
if(opacity==null){opacity=delta;}
if(background&&opacity<=max){Element.changeOpacity(background,opacity);opacity+=delta;setTimeout("Alerts.bgFadeIn("+max+","+steps+","+opacity+")",0);}},bgFadeOut:function(max,steps,opacity){var background=Alerts.background;if(background){var delta=max/steps
if(opacity==null){opacity=max-delta;}
if(opacity>=0){Element.changeOpacity(background,opacity);opacity-=delta;setTimeout("Alerts.bgFadeOut("+max+","+steps+","+opacity+")",0);}
else{background.parentNode.removeChild(background);Liferay.Util.setSelectVisibility("visible",Alerts.message);Alerts.background=null;}}},createWrapper:function(message,title){var outer=document.createElement("div");var inner=document.createElement("div");var heading=document.createElement("table");var close=document.createElement("a");outer.className="pop-up-outer";outer.align="center";inner.className="pop-up-inner";close.innerHTML="Close";close.href="javascript:Alerts.killAlert()";heading.className="pop-up-header";heading.border=0;heading.width="100%";heading.cellSpacing=0;heading.cellPadding=0;heading.insertRow(0);var row=heading.rows[0];row.insertCell(0);row.insertCell(1);var cell0=row.cells[0];var cell1=row.cells[1];cell0.className="pop-up-title";cell0.width="99%";if(title){cell0.innerHTML=title;}
cell1.className="pop-up-close";cell1.width="1%";cell1.innerHTML="<a href=\"javascript:void(0)\" onclick=\"Alerts.killAlert(this)\"><img border=\"0\" src=\""+themeDisplay.getPathThemeImage()+"/portlet/close.gif\"/></a>"
inner.appendChild(heading);inner.appendChild(message);outer.appendChild(inner);message.wrapper=outer;Drag.makeDraggable(outer,cell0);return outer;},killAlert:function(oLink){if(oLink){var wrapper=oLink;while(wrapper.parentNode){if(wrapper.className&&wrapper.className.match("pop-up-outer")){break;}
wrapper=wrapper.parentNode;}
var body=document.getElementsByTagName("body")[0];var options=wrapper.options;var background=null;var showSelects=false;Alerts.remove(wrapper);body.removeChild(wrapper);if(Alerts.messageArray.length>0){Alerts.message=Alerts.messageArray[Alerts.messageArray.length-1];Alerts.message.style.zIndex=ZINDEX.ALERT+1;Liferay.Util.setSelectVisibility("visible",Alerts.message);background=wrapper.background;}
else{Alerts.message=null;background=Alerts.background;}
if(background){Alerts.bgFadeOut(Alerts.OPACITY,Alerts.STEPS);}
if(options&&options.onClose)options.onClose();}},fireMessageBox:function(options){var body=document.body;if(!options)options=new Object();var modal=options.modal;var myMessage=options.message;var msgHeight=options.height;var msgWidth=options.width;var noCenter=options.noCenter;var title=options.title;var message=document.createElement("div");message.align="left";var wrapper=Alerts.createWrapper(message,title);wrapper.style.position="absolute";wrapper.style.top=0;wrapper.style.left=0;wrapper.style.zIndex=ZINDEX.ALERT+1;wrapper.options=options;if(myMessage){message.innerHTML=myMessage;}
else{message.innerHTML="<div class=\"portlet-loading\"></div>";}
if(msgHeight){if(is_ie){message.style.height=msgHeight+"px";}
else{message.style.minHeight=msgHeight+"px";}}
if(msgWidth){wrapper.style.width=msgWidth+"px";}
if(!Alerts.background&&modal){var background=document.createElement("div");background.id="alert-message";background.style.position="absolute";background.style.top="0";background.style.left="0";background.style.zIndex=ZINDEX.ALERT;Alerts.background=background;wrapper.background=background;background.style.backgroundColor="#000000";Element.changeOpacity(background,0);body.appendChild(background);Alerts.bgFadeIn(Alerts.OPACITY,Alerts.STEPS);}
Liferay.Util.setSelectVisibility("hidden");if(Alerts.messageArray.length>0){var lastMsg=Alerts.messageArray[Alerts.messageArray.length-1];lastMsg.style.zIndex=ZINDEX.ALERT-1;Liferay.Util.setSelectVisibility("hidden",lastMsg);}
Liferay.Util.setSelectVisibility("visibile",message);Alerts.message=message;Alerts.messageArray.push(wrapper);Alerts.resize();_$J(window).resize(Alerts.resize);if(noCenter){Alerts.center();}
else{Alerts.center(msgHeight,msgWidth);}
_$J(window).resize(Alerts.center);body.appendChild(wrapper);window.focus();return message;},popupIframe:function(url,options){var msgHeight=options.height;var msgWidth=options.width;var message=Alerts.fireMessageBox(options);var iframe=document.createElement("iframe");message.height="";iframe.src=url;iframe.frameBorder=0;if(msgWidth)iframe.style.width="100%";message.appendChild(iframe);if(!options.noCenter){Alerts.center(msgHeight,msgWidth);}
return message;},center:function(height,width){if(Alerts.message){var message=Alerts.message.wrapper;var body=document.getElementsByTagName("body")[0];var mode=message.centerMode;if(!mode){if(height&&width){mode=message.centerMode="xy";}
else if(height&&!width){mode=message.centerMode="y";}
else if(!height&&width){mode=message.centerMode="x";}
else{mode=message.centerMode="none";}}
width=width||message.offsetWidth;height=height||message.offsetHeight;var centerLeft;var centerTop;if(!is_safari){var centerLeft=(body.clientWidth-width)/2;var centerTop=body.scrollTop+((body.clientHeight-height)/2);}
else{var centerLeft=(body.offsetWidth-width)/2;var centerTop=(body.offsetHeight-height)/2;}
if(mode=="xy"||mode=="y"){message.style.top=centerTop+"px";}
else{message.style.top=(body.scrollTop+20)+"px";}
if(mode=="xy"||mode=="x"){message.style.left=centerLeft+"px";}
else{message.style.left="20px";}}},resize:function(){if(Alerts.background){var background=Alerts.background;var body=document.getElementsByTagName("body")[0];if(!is_safari){var scrollHeight=body.scrollHeight;var clientHeight=body.clientHeight;background.style.height=(scrollHeight>clientHeight?scrollHeight:clientHeight)+"px";background.style.width="100%";}
else{background.style.height=body.offsetHeight+"px";background.style.width=body.offsetWidth+"px";}}},resizeIframe:function(options){if(Alerts.message&&options){var iframe=Alerts.message.getElementsByTagName("iframe")[0];var loading=_$J.getOne(".portlet-loading",Alerts.message);if(loading){loading.parentNode.removeChild(loading);}
if(iframe){if(options.height){iframe.height=options.height;}
if(options.width){iframe.width=options.width;}}}
Alerts.resize();},remove:function(obj){var msgArray=Alerts.messageArray;for(var i=0;i<msgArray.length;i++){if(msgArray[i]==obj){msgArray.splice(i,1);break;}}}}
if(typeof deconcept=="undefined"){var deconcept=new Object();}
if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}
if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}
deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a,_b){if(!document.getElementById){return;}
this.DETECT_KEY=_b?_b:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}
if(id){this.setAttribute("id",id);}
if(w){this.setAttribute("width",w);}
if(h){this.setAttribute("height",h);}
if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}
this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(c){this.addParam("bgcolor",c);}
var q=_8?_8:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",_7);this.setAttribute("doExpressInstall",false);var _d=(_9)?_9:window.location;this.setAttribute("xiRedirectUrl",_d);this.setAttribute("redirectUrl","");if(_a){this.setAttribute("redirectUrl",_a);}};deconcept.SWFObject.prototype={setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16.push(key+"="+_18[key]);}
return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");}
_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}
var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");}
_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}
var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}
return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}
if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}
return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}
catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}
catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}
catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}
return _23;};deconcept.PlayerVersion=function(_27){this.major=_27[0]!=null?parseInt(_27[0]):0;this.minor=_27[1]!=null?parseInt(_27[1]):0;this.rev=_27[2]!=null?parseInt(_27[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}
if(this.major>fv.major){return true;}
if(this.minor<fv.minor){return false;}
if(this.minor>fv.minor){return true;}
if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_29){var q=document.location.search||document.location.hash;if(q){var _2b=q.substring(1).split("&");for(var i=0;i<_2b.length;i++){if(_2b[i].substring(0,_2b[i].indexOf("="))==_29){return _2b[i].substring((_2b[i].indexOf("=")+1));}}}
return"";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){if(window.opera||!document.all){return;}
var _2d=document.getElementsByTagName("OBJECT");for(var i=0;i<_2d.length;i++){_2d[i].style.display="none";for(var x in _2d[i]){if(typeof _2d[i][x]=="function"){_2d[i][x]=function(){};}}}};deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};if(typeof window.onunload=="function"){var _30=window.onunload;window.onunload=function(){deconcept.SWFObjectUtil.cleanupSWFs();_30();};}else{window.onunload=deconcept.SWFObjectUtil.cleanupSWFs;}};if(typeof window.onbeforeunload=="function"){var oldBeforeUnload=window.onbeforeunload;window.onbeforeunload=function(){deconcept.SWFObjectUtil.prepUnload();oldBeforeUnload();};}else{window.onbeforeunload=deconcept.SWFObjectUtil.prepUnload;}
if(Array.prototype.push==null){Array.prototype.push=function(_31){this[this.length]=_31;return this.length;};}
var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;Calendar=function(firstDayOfWeek,dateStr,onSelected,onClose){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=onSelected||null;this.onClose=onClose||null;this.dragging=false;this.hidden=false;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT["DEF_DATE_FORMAT"];this.ttDateFormat=Calendar._TT["TT_DATE_FORMAT"];this.isPopup=true;this.weekNumbers=true;this.firstDayOfWeek=typeof firstDayOfWeek=="number"?firstDayOfWeek:Calendar._FD;this.showsOtherMonths=false;this.dateStr=dateStr;this.ar_days=null;this.showsTime=false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;var ar=new Array();for(var i=8;i>0;){ar[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);}Calendar._SDN=ar;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;ar=new Array();for(var i=12;i>0;){ar[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);}Calendar._SMN=ar;}};Calendar._C=null;Calendar.is_ie=(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent));Calendar.is_ie5=(Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(el){var SL=0,ST=0;var is_div=/^div$/i.test(el.tagName);if(is_div&&el.scrollLeft)SL=el.scrollLeft;if(is_div&&el.scrollTop)ST=el.scrollTop;var r={x:el.offsetLeft-SL,y:el.offsetTop-ST};if(el.offsetParent){var tmp=this.getAbsolutePos(el.offsetParent);r.x+=tmp.x;r.y+=tmp.y;}return r;};Calendar.isRelated=function(el,evt){var related=evt.relatedTarget;if(!related){var type=evt.type;if(type=="mouseover"){related=evt.fromElement;}else if(type=="mouseout"){related=evt.toElement;}}while(related){if(related==el){return true;}related=related.parentNode;}return false;};Calendar.removeClass=function(el,className){if(!(el&&el.className)){return;}var cls=el.className.split(" ");var ar=new Array();for(var i=cls.length;i>0;){if(cls[--i]!=className){ar[ar.length]=cls[i];}}el.className=ar.join(" ");};Calendar.addClass=function(el,className){Calendar.removeClass(el,className);el.className+=" "+className;};Calendar.getElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.currentTarget;while(f.nodeType!=1||/^div$/i.test(f.tagName))f=f.parentNode;return f;};Calendar.getTargetElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.target;while(f.nodeType!=1)f=f.parentNode;return f;};Calendar.stopEvent=function(ev){ev||(ev=window.event);if(Calendar.is_ie){ev.cancelBubble=true;ev.returnValue=false;}else{ev.preventDefault();ev.stopPropagation();}return false;};Calendar.addEvent=function(el,evname,func){if(el.attachEvent){el.attachEvent("on"+evname,func);}else if(el.addEventListener){el.addEventListener(evname,func,true);}else{el["on"+evname]=func;}};Calendar.removeEvent=function(el,evname,func){if(el.detachEvent){el.detachEvent("on"+evname,func);}else if(el.removeEventListener){el.removeEventListener(evname,func,true);}else{el["on"+evname]=null;}};Calendar.createElement=function(type,parent){var el=null;if(document.createElementNS){el=document.createElementNS("http://www.w3.org/1999/xhtml",type);}else{el=document.createElement(type);}if(typeof parent!="undefined"){parent.appendChild(el);}return el;};Calendar._add_evs=function(el){with(Calendar){addEvent(el,"mouseover",dayMouseOver);addEvent(el,"mousedown",dayMouseDown);addEvent(el,"mouseout",dayMouseOut);if(is_ie){addEvent(el,"dblclick",dayMouseDblClick);el.setAttribute("unselectable",true);}}};Calendar.findMonth=function(el){if(typeof el.month!="undefined"){return el;}else if(typeof el.parentNode.month!="undefined"){return el.parentNode;}return null;};Calendar.findYear=function(el){if(typeof el.year!="undefined"){return el;}else if(typeof el.parentNode.year!="undefined"){return el.parentNode;}return null;};Calendar.showMonthsCombo=function(){var cal=Calendar._C;if(!cal){return false;}var cal=cal;var cd=cal.activeDiv;var mc=cal.monthsCombo;if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}if(cal.activeMonth){Calendar.removeClass(cal.activeMonth,"active");}var mon=cal.monthsCombo.getElementsByTagName("div")[cal.date.getMonth()];Calendar.addClass(mon,"active");cal.activeMonth=mon;var s=mc.style;s.display="block";if(cd.navtype<0)s.left=cd.offsetLeft+"px";else{var mcw=mc.offsetWidth;if(typeof mcw=="undefined")mcw=50;s.left=(cd.offsetLeft+cd.offsetWidth-mcw)+"px";}s.top=(cd.offsetTop+cd.offsetHeight)+"px";};Calendar.showYearsCombo=function(fwd){var cal=Calendar._C;if(!cal){return false;}var cal=cal;var cd=cal.activeDiv;var yc=cal.yearsCombo;if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}if(cal.activeYear){Calendar.removeClass(cal.activeYear,"active");}cal.activeYear=null;var Y=cal.date.getFullYear()+(fwd?1:-1);var yr=yc.firstChild;var show=false;for(var i=12;i>0;--i){if(Y>=cal.minYear&&Y<=cal.maxYear){yr.innerHTML=Y;yr.year=Y;yr.style.display="block";show=true;}else{yr.style.display="none";}yr=yr.nextSibling;Y+=fwd?cal.yearStep:-cal.yearStep;}if(show){var s=yc.style;s.display="block";if(cd.navtype<0)s.left=cd.offsetLeft+"px";else{var ycw=yc.offsetWidth;if(typeof ycw=="undefined")ycw=50;s.left=(cd.offsetLeft+cd.offsetWidth-ycw)+"px";}s.top=(cd.offsetTop+cd.offsetHeight)+"px";}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal){return false;}if(cal.timeout){clearTimeout(cal.timeout);}var el=cal.activeDiv;if(!el){return false;}var target=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(el,"active");if(target==el||target.parentNode==el){Calendar.cellClick(el,ev);}var mon=Calendar.findMonth(target);var date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}else{var year=Calendar.findYear(target);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev);}};Calendar.tableMouseOver=function(ev){var cal=Calendar._C;if(!cal){return;}var el=cal.activeDiv;var target=Calendar.getTargetElement(ev);if(target==el||target.parentNode==el){Calendar.addClass(el,"hilite active");Calendar.addClass(el.parentNode,"rowhilite");}else{if(typeof el.navtype=="undefined"||(el.navtype!=50&&(el.navtype==0||Math.abs(el.navtype)>2)))Calendar.removeClass(el,"active");Calendar.removeClass(el,"hilite");Calendar.removeClass(el.parentNode,"rowhilite");}ev||(ev=window.event);if(el.navtype==50&&target!=el){var pos=Calendar.getAbsolutePos(el);var w=el.offsetWidth;var x=ev.clientX;var dx;var decrease=true;if(x>pos.x+w){dx=x-pos.x-w;decrease=false;}else dx=pos.x-x;if(dx<0)dx=0;var range=el._range;var current=el._current;var count=Math.floor(dx/10)%range.length;for(var i=range.length;--i>=0;)if(range[i]==current)break;while(count-->0)if(decrease){if(--i<0)i=range.length-1;}else if(++i>=range.length)i=0;var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();}var mon=Calendar.findMonth(target);if(mon){if(mon.month!=cal.date.getMonth()){if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}Calendar.addClass(mon,"hilite");cal.hilitedMonth=mon;}else if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}var year=Calendar.findYear(target);if(year){if(year.year!=cal.date.getFullYear()){if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}Calendar.addClass(year,"hilite");cal.hilitedYear=year;}else if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}else if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}return Calendar.stopEvent(ev);};Calendar.tableMouseDown=function(ev){if(Calendar.getTargetElement(ev)==Calendar.getElement(ev)){return Calendar.stopEvent(ev);}};Calendar.calDragIt=function(ev){var cal=Calendar._C;if(!(cal&&cal.dragging)){return false;}var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posX=ev.pageX;posY=ev.pageY;}cal.hideShowCovered();var st=cal.element.style;st.left=(posX-cal.xOffs)+"px";st.top=(posY-cal.yOffs)+"px";return Calendar.stopEvent(ev);};Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal){return false;}cal.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(ev);}cal.hideShowCovered();};Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled){return false;}var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!=300)with(Calendar){if(el.navtype==50){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver);}else addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver);addClass(el,"hilite active");addEvent(document,"mouseup",tableMouseUp);}else if(cal.isPopup){cal._dragStart(ev);}if(el.navtype==-1||el.navtype==1){if(cal.timeout)clearTimeout(cal.timeout);cal.timeout=setTimeout("Calendar.showMonthsCombo()",250);}else if(el.navtype==-2||el.navtype==2){if(cal.timeout)clearTimeout(cal.timeout);cal.timeout=setTimeout((el.navtype>0)?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250);}else{cal.timeout=null;}return Calendar.stopEvent(ev);};Calendar.dayMouseDblClick=function(ev){Calendar.cellClick(Calendar.getElement(ev),ev||window.event);if(Calendar.is_ie){document.selection.empty();}};Calendar.dayMouseOver=function(ev){var el=Calendar.getElement(ev);if(Calendar.isRelated(el,ev)||Calendar._C||el.disabled){return false;}if(el.ttip){if(el.ttip.substr(0,1)=="_"){el.ttip=el.caldate.print(el.calendar.ttDateFormat)+el.ttip.substr(1);}el.calendar.tooltips.innerHTML=el.ttip;}if(el.navtype!=300){Calendar.addClass(el,"hilite");if(el.caldate){Calendar.addClass(el.parentNode,"rowhilite");}}return Calendar.stopEvent(ev);};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);if(isRelated(el,ev)||_C||el.disabled)return false;removeClass(el,"hilite");if(el.caldate)removeClass(el.parentNode,"rowhilite");if(el.calendar)el.calendar.tooltips.innerHTML=_TT["SEL_DATE"];return stopEvent(ev);}};Calendar.cellClick=function(el,ev){var cal=el.calendar;var closing=false;var newdate=false;var date=null;if(typeof el.navtype=="undefined"){if(cal.currentDateEl){Calendar.removeClass(cal.currentDateEl,"selected");Calendar.addClass(el,"selected");closing=(cal.currentDateEl==el);if(!closing){cal.currentDateEl=el;}}cal.date.setDateOnly(el.caldate);date=cal.date;var other_month=!(cal.dateClicked=!el.otherMonth);if(!other_month&&!cal.currentDateEl)cal._toggleMultipleDate(new Date(date));else newdate=!el.disabled;if(other_month)cal._init(cal.firstDayOfWeek,date);}else{if(el.navtype==200){Calendar.removeClass(el,"hilite");cal.callCloseHandler();return;}date=new Date(cal.date);if(el.navtype==0)date.setDateOnly(new Date());cal.dateClicked=false;var year=date.getFullYear();var mon=date.getMonth();function setMonth(m){var day=date.getDate();var max=date.getMonthDays(m);if(day>max){date.setDate(max);}date.setMonth(m);};switch(el.navtype){case 400:Calendar.removeClass(el,"hilite");var text=Calendar._TT["ABOUT"];if(typeof text!="undefined"){text+=cal.showsTime?Calendar._TT["ABOUT_TIME"]:"";}else{text="Help and about box text is not translated into this language.\n"+"If you know this language and you feel generous please update\n"+"the corresponding file in \"lang\" subdir to match calendar-en.js\n"+"and send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\n"+"Thank you!\n"+"http://dynarch.com/mishoo/calendar.epl\n";}alert(text);return;case-2:if(year>cal.minYear){date.setFullYear(year-1);}break;case-1:if(mon>0){setMonth(mon-1);}else if(year-->cal.minYear){date.setFullYear(year);setMonth(11);}break;case 1:if(mon<11){setMonth(mon+1);}else if(year<cal.maxYear){date.setFullYear(year+1);setMonth(0);}break;case 2:if(year<cal.maxYear){date.setFullYear(year+1);}break;case 100:cal.setFirstDayOfWeek(el.fdow);return;case 50:var range=el._range;var current=el.innerHTML;for(var i=range.length;--i>=0;)if(range[i]==current)break;if(ev&&ev.shiftKey){if(--i<0)i=range.length-1;}else if(++i>=range.length)i=0;var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();return;case 0:if((typeof cal.getDateStatus=="function")&&cal.getDateStatus(date,date.getFullYear(),date.getMonth(),date.getDate())){return false;}break;}if(!date.equalsTo(cal.date)){cal.setDate(date);newdate=true;}else if(el.navtype==0)newdate=closing=true;}if(newdate){ev&&cal.callHandler();}if(closing){Calendar.removeClass(el,"hilite");ev&&cal.callCloseHandler();}};Calendar.prototype.create=function(_par){var parent=null;if(!_par){parent=document.getElementsByTagName("body")[0];this.isPopup=true;}else{parent=_par;this.isPopup=false;}this.date=this.dateStr?new Date(this.dateStr):new Date();var table=Calendar.createElement("table");this.table=table;table.cellSpacing=0;table.cellPadding=0;table.calendar=this;Calendar.addEvent(table,"mousedown",Calendar.tableMouseDown);var div=Calendar.createElement("div");this.element=div;div.className="calendar";if(this.isPopup){div.style.position="absolute";div.style.display="none";}div.appendChild(table);var thead=Calendar.createElement("thead",table);var cell=null;var row=null;var cal=this;var hh=function(text,cs,navtype){cell=Calendar.createElement("td",row);cell.colSpan=cs;cell.className="button";if(navtype!=0&&Math.abs(navtype)<=2)cell.className+=" nav";Calendar._add_evs(cell);cell.calendar=cal;cell.navtype=navtype;cell.innerHTML="<div unselectable='on'>"+text+"</div>";return cell;};row=Calendar.createElement("tr",thead);var title_length=6;(this.isPopup)&&--title_length;(this.weekNumbers)&&++title_length;hh("?",1,400).ttip=Calendar._TT["INFO"];this.title=hh("",title_length,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT["DRAG_TO_MOVE"];this.title.style.cursor="move";hh("&#x00d7;",1,200).ttip=Calendar._TT["CLOSE"];}row=Calendar.createElement("tr",thead);row.className="headrow";this._nav_py=hh("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT["PREV_YEAR"];this._nav_pm=hh("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT["PREV_MONTH"];this._nav_now=hh(Calendar._TT["TODAY"],this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT["GO_TODAY"];this._nav_nm=hh("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT["NEXT_MONTH"];this._nav_ny=hh("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT["NEXT_YEAR"];row=Calendar.createElement("tr",thead);row.className="daynames";if(this.weekNumbers){cell=Calendar.createElement("td",row);cell.className="name wn";cell.innerHTML=Calendar._TT["WK"];}for(var i=7;i>0;--i){cell=Calendar.createElement("td",row);if(!i){cell.navtype=100;cell.calendar=this;Calendar._add_evs(cell);}}this.firstdayname=(this.weekNumbers)?row.firstChild.nextSibling:row.firstChild;this._displayWeekdays();var tbody=Calendar.createElement("tbody",table);this.tbody=tbody;for(i=6;i>0;--i){row=Calendar.createElement("tr",tbody);if(this.weekNumbers){cell=Calendar.createElement("td",row);}for(var j=7;j>0;--j){cell=Calendar.createElement("td",row);cell.calendar=this;Calendar._add_evs(cell);}}if(this.showsTime){row=Calendar.createElement("tr",tbody);row.className="time";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;cell.innerHTML=Calendar._TT["TIME"]||"&nbsp;";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=this.weekNumbers?4:3;(function(){function makeTimePart(className,init,range_start,range_end){var part=Calendar.createElement("span",cell);part.className=className;part.innerHTML=init;part.calendar=cal;part.ttip=Calendar._TT["TIME_PART"];part.navtype=50;part._range=[];if(typeof range_start!="number")part._range=range_start;else{for(var i=range_start;i<=range_end;++i){var txt;if(i<10&&range_end>=10)txt='0'+i;else txt=''+i;part._range[part._range.length]=txt;}}Calendar._add_evs(part);return part;};var hrs=cal.date.getHours();var mins=cal.date.getMinutes();var t12=!cal.time24;var pm=(hrs>12);if(t12&&pm)hrs-=12;var H=makeTimePart("hour",hrs,t12?1:0,t12?12:23);var span=Calendar.createElement("span",cell);span.innerHTML=":";span.className="colon";var M=makeTimePart("minute",mins,0,59);var AP=null;cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;if(t12)AP=makeTimePart("ampm",pm?"pm":"am",["am","pm"]);else cell.innerHTML="&nbsp;";cal.onSetTime=function(){var pm,hrs=this.date.getHours(),mins=this.date.getMinutes();if(t12){pm=(hrs>=12);if(pm)hrs-=12;if(hrs==0)hrs=12;AP.innerHTML=pm?"pm":"am";}H.innerHTML=(hrs<10)?("0"+hrs):hrs;M.innerHTML=(mins<10)?("0"+mins):mins;};cal.onUpdateTime=function(){var date=this.date;var h=parseInt(H.innerHTML,10);if(t12){if(/pm/i.test(AP.innerHTML)&&h<12)h+=12;else if(/am/i.test(AP.innerHTML)&&h==12)h=0;}var d=date.getDate();var m=date.getMonth();var y=date.getFullYear();date.setHours(h);date.setMinutes(parseInt(M.innerHTML,10));date.setFullYear(y);date.setMonth(m);date.setDate(d);this.dateClicked=false;this.callHandler();};})();}else{this.onSetTime=this.onUpdateTime=function(){};}var tfoot=Calendar.createElement("tfoot",table);row=Calendar.createElement("tr",tfoot);row.className="footrow";cell=hh(Calendar._TT["SEL_DATE"],this.weekNumbers?8:7,300);cell.className="ttip";if(this.isPopup){cell.ttip=Calendar._TT["DRAG_TO_MOVE"];cell.style.cursor="move";}this.tooltips=cell;div=Calendar.createElement("div",this.element);this.monthsCombo=div;div.className="combo";for(i=0;i<Calendar._MN.length;++i){var mn=Calendar.createElement("div");mn.className=Calendar.is_ie?"label-IEfix":"label";mn.month=i;mn.innerHTML=Calendar._SMN[i];div.appendChild(mn);}div=Calendar.createElement("div",this.element);this.yearsCombo=div;div.className="combo";for(i=12;i>0;--i){var yr=Calendar.createElement("div");yr.className=Calendar.is_ie?"label-IEfix":"label";div.appendChild(yr);}this._init(this.firstDayOfWeek,this.date);parent.appendChild(this.element);};Calendar._keyEvent=function(ev){var cal=window._dynarch_popupCalendar;if(!cal||cal.multiple)return false;(Calendar.is_ie)&&(ev=window.event);var act=(Calendar.is_ie||ev.type=="keypress"),K=ev.keyCode;if(ev.ctrlKey){switch(K){case 37:act&&Calendar.cellClick(cal._nav_pm);break;case 38:act&&Calendar.cellClick(cal._nav_py);break;case 39:act&&Calendar.cellClick(cal._nav_nm);break;case 40:act&&Calendar.cellClick(cal._nav_ny);break;default:return false;}}else switch(K){case 32:Calendar.cellClick(cal._nav_now);break;case 27:act&&cal.callCloseHandler();break;case 37:case 38:case 39:case 40:if(act){var prev,x,y,ne,el,step;prev=K==37||K==38;step=(K==37||K==39)?1:7;function setVars(){el=cal.currentDateEl;var p=el.pos;x=p&15;y=p>>4;ne=cal.ar_days[y][x];};setVars();function prevMonth(){var date=new Date(cal.date);date.setDate(date.getDate()-step);cal.setDate(date);};function nextMonth(){var date=new Date(cal.date);date.setDate(date.getDate()+step);cal.setDate(date);};while(1){switch(K){case 37:if(--x>=0)ne=cal.ar_days[y][x];else{x=6;K=38;continue;}break;case 38:if(--y>=0)ne=cal.ar_days[y][x];else{prevMonth();setVars();}break;case 39:if(++x<7)ne=cal.ar_days[y][x];else{x=0;K=40;continue;}break;case 40:if(++y<cal.ar_days.length)ne=cal.ar_days[y][x];else{nextMonth();setVars();}break;}break;}if(ne){if(!ne.disabled)Calendar.cellClick(ne);else if(prev)prevMonth();else nextMonth();}}break;case 13:if(act)Calendar.cellClick(cal.currentDateEl,ev);break;default:return false;}return Calendar.stopEvent(ev);};Calendar.prototype._init=function(firstDayOfWeek,date){var today=new Date(),TY=today.getFullYear(),TM=today.getMonth(),TD=today.getDate();this.table.style.visibility="hidden";var year=date.getFullYear();if(year<this.minYear){year=this.minYear;date.setFullYear(year);}else if(year>this.maxYear){year=this.maxYear;date.setFullYear(year);}this.firstDayOfWeek=firstDayOfWeek;this.date=new Date(date);var month=date.getMonth();var mday=date.getDate();var no_days=date.getMonthDays();date.setDate(1);var day1=(date.getDay()-this.firstDayOfWeek)%7;if(day1<0)day1+=7;date.setDate(-day1);date.setDate(date.getDate()+1);var row=this.tbody.firstChild;var MN=Calendar._SMN[month];var ar_days=this.ar_days=new Array();var weekend=Calendar._TT["WEEKEND"];var dates=this.multiple?(this.datesCells={}):null;for(var i=0;i<6;++i,row=row.nextSibling){var cell=row.firstChild;if(this.weekNumbers){cell.className="day wn";cell.innerHTML=date.getWeekNumber();cell=cell.nextSibling;}row.className="daysrow";var hasdays=false,iday,dpos=ar_days[i]=[];for(var j=0;j<7;++j,cell=cell.nextSibling,date.setDate(iday+1)){iday=date.getDate();var wday=date.getDay();cell.className="day";cell.pos=i<<4|j;dpos[j]=cell;var current_month=(date.getMonth()==month);if(!current_month){if(this.showsOtherMonths){cell.className+=" othermonth";cell.otherMonth=true;}else{cell.className="emptycell";cell.innerHTML="&nbsp;";cell.disabled=true;continue;}}else{cell.otherMonth=false;hasdays=true;}cell.disabled=false;cell.innerHTML=this.getDateText?this.getDateText(date,iday):iday;if(dates)dates[date.print("%Y%m%d")]=cell;if(this.getDateStatus){var status=this.getDateStatus(date,year,month,iday);if(this.getDateToolTip){var toolTip=this.getDateToolTip(date,year,month,iday);if(toolTip)cell.title=toolTip;}if(status===true){cell.className+=" disabled";cell.disabled=true;}else{if(/disabled/i.test(status))cell.disabled=true;cell.className+=" "+status;}}if(!cell.disabled){cell.caldate=new Date(date);cell.ttip="_";if(!this.multiple&&current_month&&iday==mday&&this.hiliteToday){cell.className+=" selected";this.currentDateEl=cell;}if(date.getFullYear()==TY&&date.getMonth()==TM&&iday==TD){cell.className+=" today";cell.ttip+=Calendar._TT["PART_TODAY"];}if(weekend.indexOf(wday.toString())!=-1)cell.className+=cell.otherMonth?" oweekend":" weekend";}}if(!(hasdays||this.showsOtherMonths))row.className="emptyrow";}this.title.innerHTML=Calendar._MN[month]+", "+year;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates();};Calendar.prototype._initMultipleDates=function(){if(this.multiple){for(var i in this.multiple){var cell=this.datesCells[i];var d=this.multiple[i];if(!d)continue;if(cell)cell.className+=" selected";}}};Calendar.prototype._toggleMultipleDate=function(date){if(this.multiple){var ds=date.print("%Y%m%d");var cell=this.datesCells[ds];if(cell){var d=this.multiple[ds];if(!d){Calendar.addClass(cell,"selected");this.multiple[ds]=date;}else{Calendar.removeClass(cell,"selected");delete this.multiple[ds];}}}};Calendar.prototype.setDateToolTipHandler=function(unaryFunction){this.getDateToolTip=unaryFunction;};Calendar.prototype.setDate=function(date){if(!date.equalsTo(this.date)){this._init(this.firstDayOfWeek,date);}};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date);};Calendar.prototype.setFirstDayOfWeek=function(firstDayOfWeek){this._init(firstDayOfWeek,this.date);this._displayWeekdays();};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(unaryFunction){this.getDateStatus=unaryFunction;};Calendar.prototype.setRange=function(a,z){this.minYear=a;this.maxYear=z;};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat));}};Calendar.prototype.callCloseHandler=function(){if(this.onClose){this.onClose(this);}this.hideShowCovered();};Calendar.prototype.destroy=function(){var el=this.element.parentNode;el.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null;};Calendar.prototype.reparent=function(new_parent){var el=this.element;el.parentNode.removeChild(el);new_parent.appendChild(el);};Calendar._checkCalendar=function(ev){var calendar=window._dynarch_popupCalendar;if(!calendar){return false;}var el=Calendar.is_ie?Calendar.getElement(ev):Calendar.getTargetElement(ev);for(;el!=null&&el!=calendar.element;el=el.parentNode);if(el==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(ev);}};Calendar.prototype.show=function(){var rows=this.table.getElementsByTagName("tr");for(var i=rows.length;i>0;){var row=rows[--i];Calendar.removeClass(row,"rowhilite");var cells=row.getElementsByTagName("td");for(var j=cells.length;j>0;){var cell=cells[--j];Calendar.removeClass(cell,"hilite");Calendar.removeClass(cell,"active");}}this.element.style.display="block";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);}this.hideShowCovered();};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar);}this.element.style.display="none";this.hidden=true;this.hideShowCovered();};Calendar.prototype.showAt=function(x,y){var s=this.element.style;s.left=x+"px";s.top=y+"px";this.show();};Calendar.prototype.showAtElement=function(el,opts){var self=this;var p=Calendar.getAbsolutePos(el);if(!opts||typeof opts!="string"){this.showAt(p.x,p.y+el.offsetHeight);return true;}function fixPosition(box){if(box.x<0)box.x=0;if(box.y<0)box.y=0;var cp=document.createElement("div");var s=cp.style;s.position="absolute";s.right=s.bottom=s.width=s.height="0px";document.body.appendChild(cp);var br=Calendar.getAbsolutePos(cp);document.body.removeChild(cp);if(Calendar.is_ie){br.y+=document.body.scrollTop;br.x+=document.body.scrollLeft;}else{br.y+=window.scrollY;br.x+=window.scrollX;}var tmp=box.x+box.width-br.x;if(tmp>0)box.x-=tmp;tmp=box.y+box.height-br.y;if(tmp>0)box.y-=tmp;};this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var w=self.element.offsetWidth;var h=self.element.offsetHeight;self.element.style.display="none";var valign=opts.substr(0,1);var halign="l";if(opts.length>1){halign=opts.substr(1,1);}switch(valign){case"T":p.y-=h;break;case"B":p.y+=el.offsetHeight;break;case"C":p.y+=(el.offsetHeight-h)/2;break;case"t":p.y+=el.offsetHeight-h;break;case"b":break;}switch(halign){case"L":p.x-=w;break;case"R":p.x+=el.offsetWidth;break;case"C":p.x+=(el.offsetWidth-w)/2;break;case"l":p.x+=el.offsetWidth-w;break;case"r":break;}p.width=w;p.height=h+40;self.monthsCombo.style.display="none";fixPosition(p);self.showAt(p.x,p.y);};if(Calendar.is_khtml)setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10);else Calendar.continuation_for_the_fucking_khtml_browser();};Calendar.prototype.setDateFormat=function(str){this.dateFormat=str;};Calendar.prototype.setTtDateFormat=function(str){this.ttDateFormat=str;};Calendar.prototype.parseDate=function(str,fmt){if(!fmt)fmt=this.dateFormat;this.setDate(Date.parseDate(str,fmt));};Calendar.prototype.hideShowCovered=function(){if(!Calendar.is_ie&&!Calendar.is_opera)return;function getVisib(obj){var value=obj.style.visibility;if(!value){if(document.defaultView&&typeof(document.defaultView.getComputedStyle)=="function"){if(!Calendar.is_khtml)value=document.defaultView.getComputedStyle(obj,"").getPropertyValue("visibility");else value='';}else if(obj.currentStyle){value=obj.currentStyle.visibility;}else value='';}return value;};var tags=new Array("applet","iframe","select");var el=this.element;var p=Calendar.getAbsolutePos(el);var EX1=p.x;var EX2=el.offsetWidth+EX1;var EY1=p.y;var EY2=el.offsetHeight+EY1;for(var k=tags.length;k>0;){var ar=document.getElementsByTagName(tags[--k]);var cc=null;for(var i=ar.length;i>0;){cc=ar[--i];p=Calendar.getAbsolutePos(cc);var CX1=p.x;var CX2=cc.offsetWidth+CX1;var CY1=p.y;var CY2=cc.offsetHeight+CY1;if(this.hidden||(CX1>EX2)||(CX2<EX1)||(CY1>EY2)||(CY2<EY1)){if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}cc.style.visibility=cc.__msh_save_visibility;}else{if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}cc.style.visibility="hidden";}}}};Calendar.prototype._displayWeekdays=function(){var fdow=this.firstDayOfWeek;var cell=this.firstdayname;var weekend=Calendar._TT["WEEKEND"];for(var i=0;i<7;++i){cell.className="day name";var realday=(i+fdow)%7;if(i){cell.ttip=Calendar._TT["DAY_FIRST"].replace("%s",Calendar._DN[realday]);cell.navtype=100;cell.calendar=this;cell.fdow=realday;Calendar._add_evs(cell);}if(weekend.indexOf(realday.toString())!=-1){Calendar.addClass(cell,"weekend");}cell.innerHTML=Calendar._SDN[(i+fdow)%7];cell=cell.nextSibling;}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none";};Calendar.prototype._dragStart=function(ev){if(this.dragging){return;}this.dragging=true;var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posY=ev.clientY+window.scrollY;posX=ev.clientX+window.scrollX;}var st=this.element.style;this.xOffs=posX-parseInt(st.left);this.yOffs=posY-parseInt(st.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd);}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date.parseDate=function(str,fmt){var today=new Date();var y=0;var m=-1;var d=0;var a=str.split(/\W+/);var b=fmt.match(/%./g);var i=0,j=0;var hr=0;var min=0;for(i=0;i<a.length;++i){if(!a[i])continue;switch(b[i]){case"%d":case"%e":d=parseInt(a[i],10);break;case"%m":m=parseInt(a[i],10)-1;break;case"%Y":case"%y":y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);break;case"%b":case"%B":for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){m=j;break;}}break;case"%H":case"%I":case"%k":case"%l":hr=parseInt(a[i],10);break;case"%P":case"%p":if(/pm/i.test(a[i])&&hr<12)hr+=12;else if(/am/i.test(a[i])&&hr>=12)hr-=12;break;case"%M":min=parseInt(a[i],10);break;}}if(isNaN(y))y=today.getFullYear();if(isNaN(m))m=today.getMonth();if(isNaN(d))d=today.getDate();if(isNaN(hr))hr=today.getHours();if(isNaN(min))min=today.getMinutes();if(y!=0&&m!=-1&&d!=0)return new Date(y,m,d,hr,min,0);y=0;m=-1;d=0;for(i=0;i<a.length;++i){if(a[i].search(/[a-zA-Z]+/)!=-1){var t=-1;for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){t=j;break;}}if(t!=-1){if(m!=-1){d=m+1;}m=t;}}else if(parseInt(a[i],10)<=12&&m==-1){m=a[i]-1;}else if(parseInt(a[i],10)>31&&y==0){y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);}else if(d==0){d=a[i];}}if(y==0)y=today.getFullYear();if(m!=-1&&d!=0)return new Date(y,m,d,hr,min,0);return today;};Date.prototype.getMonthDays=function(month){var year=this.getFullYear();if(typeof month=="undefined"){month=this.getMonth();}if(((0==(year%4))&&((0!=(year%100))||(0==(year%400))))&&month==1){return 29;}else{return Date._MD[month];}};Date.prototype.getDayOfYear=function(){var now=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var then=new Date(this.getFullYear(),0,0,0,0,0);var time=now-then;return Math.floor(time/Date.DAY);};Date.prototype.getWeekNumber=function(){var d=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var DoW=d.getDay();d.setDate(d.getDate()-(DoW+6)%7+3);var ms=d.valueOf();d.setMonth(0);d.setDate(4);return Math.round((ms-d.valueOf())/(7*864e5))+1;};Date.prototype.equalsTo=function(date){return((this.getFullYear()==date.getFullYear())&&(this.getMonth()==date.getMonth())&&(this.getDate()==date.getDate())&&(this.getHours()==date.getHours())&&(this.getMinutes()==date.getMinutes()));};Date.prototype.setDateOnly=function(date){var tmp=new Date(date);this.setDate(1);this.setFullYear(tmp.getFullYear());this.setMonth(tmp.getMonth());this.setDate(tmp.getDate());};Date.prototype.print=function(str){var m=this.getMonth();var d=this.getDate();var y=this.getFullYear();var wn=this.getWeekNumber();var w=this.getDay();var s={};var hr=this.getHours();var pm=(hr>=12);var ir=(pm)?(hr-12):hr;var dy=this.getDayOfYear();if(ir==0)ir=12;var min=this.getMinutes();var sec=this.getSeconds();s["%a"]=Calendar._SDN[w];s["%A"]=Calendar._DN[w];s["%b"]=Calendar._SMN[m];s["%B"]=Calendar._MN[m];s["%C"]=1+Math.floor(y/100);s["%d"]=(d<10)?("0"+d):d;s["%e"]=d;s["%H"]=(hr<10)?("0"+hr):hr;s["%I"]=(ir<10)?("0"+ir):ir;s["%j"]=(dy<100)?((dy<10)?("00"+dy):("0"+dy)):dy;s["%k"]=hr;s["%l"]=ir;s["%m"]=(m<9)?("0"+(1+m)):(1+m);s["%M"]=(min<10)?("0"+min):min;s["%n"]="\n";s["%p"]=pm?"PM":"AM";s["%P"]=pm?"pm":"am";s["%s"]=Math.floor(this.getTime()/1000);s["%S"]=(sec<10)?("0"+sec):sec;s["%t"]="\t";s["%U"]=s["%W"]=s["%V"]=(wn<10)?("0"+wn):wn;s["%u"]=w+1;s["%w"]=w;s["%y"]=(''+y).substr(2,2);s["%Y"]=y;s["%%"]="%";var re=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return str.replace(re,function(par){return s[par]||par;});var a=str.match(re);for(var i=0;i<a.length;i++){var tmp=s[a[i]];if(tmp){re=new RegExp(a[i],'g');str=str.replace(re,tmp);}}return str;};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(y){var d=new Date(this);d.__msh_oldSetFullYear(y);if(d.getMonth()!=this.getMonth())this.setDate(28);this.__msh_oldSetFullYear(y);};window._dynarch_popupCalendar=null;Calendar.setup=function(params){function param_default(pname,def){if(typeof params[pname]=="undefined"){params[pname]=def;}};param_default("inputField",null);param_default("displayArea",null);param_default("button",null);param_default("eventName","click");param_default("ifFormat","%Y/%m/%d");param_default("daFormat","%Y/%m/%d");param_default("singleClick",true);param_default("disableFunc",null);param_default("dateStatusFunc",params["disableFunc"]);param_default("dateText",null);param_default("firstDay",null);param_default("align","Br");param_default("range",[1900,2999]);param_default("weekNumbers",true);param_default("flat",null);param_default("flatCallback",null);param_default("onSelect",null);param_default("onClose",null);param_default("onUpdate",null);param_default("date",null);param_default("showsTime",false);param_default("timeFormat","24");param_default("electric",true);param_default("step",2);param_default("position",null);param_default("cache",false);param_default("showOthers",false);param_default("multiple",null);var tmp=["inputField","displayArea","button"];for(var i in tmp){if(typeof params[tmp[i]]=="string"){params[tmp[i]]=document.getElementById(params[tmp[i]]);}}if(!(params.flat||params.multiple||params.inputField||params.displayArea||params.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false;}function onSelect(cal){var p=cal.params;var update=(cal.dateClicked||p.electric);if(update&&p.inputField){p.inputField.value=cal.date.print(p.ifFormat);if(typeof p.inputField.onchange=="function")p.inputField.onchange();}if(update&&p.displayArea)p.displayArea.innerHTML=cal.date.print(p.daFormat);if(update&&typeof p.onUpdate=="function")p.onUpdate(cal);if(update&&p.flat){if(typeof p.flatCallback=="function")p.flatCallback(cal);}if(update&&p.singleClick&&cal.dateClicked)cal.callCloseHandler();};if(params.flat!=null){if(typeof params.flat=="string")params.flat=document.getElementById(params.flat);if(!params.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false;}var cal=new Calendar(params.firstDay,params.date,params.onSelect||onSelect);cal.showsOtherMonths=params.showOthers;cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.params=params;cal.weekNumbers=params.weekNumbers;cal.setRange(params.range[0],params.range[1]);cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;if(params.ifFormat){cal.setDateFormat(params.ifFormat);}if(params.inputField&&typeof params.inputField.value=="string"){cal.parseDate(params.inputField.value);}cal.create(params.flat);cal.show();return false;}var triggerEl=params.button||params.displayArea||params.inputField;triggerEl["on"+params.eventName]=function(){var dateEl=params.inputField||params.displayArea;var dateFmt=params.inputField?params.ifFormat:params.daFormat;var mustCreate=false;var cal=window.calendar;if(dateEl)params.date=Date.parseDate(dateEl.value||dateEl.innerHTML,dateFmt);if(!(cal&&params.cache)){window.calendar=cal=new Calendar(params.firstDay,params.date,params.onSelect||onSelect,params.onClose||function(cal){cal.hide();});cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.weekNumbers=params.weekNumbers;mustCreate=true;}else{if(params.date)cal.setDate(params.date);cal.hide();}if(params.multiple){cal.multiple={};for(var i=params.multiple.length;--i>=0;){var d=params.multiple[i];var ds=d.print("%Y%m%d");cal.multiple[ds]=d;}}cal.showsOtherMonths=params.showOthers;cal.yearStep=params.step;cal.setRange(params.range[0],params.range[1]);cal.params=params;cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;cal.setDateFormat(dateFmt);if(mustCreate)cal.create();cal.refresh();if(!params.position)cal.showAtElement(params.button||params.displayArea||params.inputField,params.align);else cal.showAt(params.position[0],params.position[1]);return false;};return cal;};function ColorPicker(src,func){var cp=document.createElement("div");var image=document.createElement("img");var body=document.getElementsByTagName("body")[0];var textInput=null;var originalValue="";var self=this;cp.id="color-picker-div";cp.style.height="192px";cp.style.width="100px";cp.style.position="absolute";cp.style.display="none";cp.style.cursor="crosshair";cp.style.zIndex=1;image.style.height="192px";image.style.width="100px";image.src=src;cp.appendChild(image);body.insertBefore(cp,body.childNodes[0]);this.hide=function(){cp.style.display="none";if(func!=null){func();}}
this.toggle=function(obj){if(cp.style.display=="none"){var nwOffset=Coordinates.northwestOffset(obj,true);cp.style.left=nwOffset.x+25+"px";cp.style.top=nwOffset.y+"px";cp.style.display="block";textInput=obj.parentNode.getElementsByTagName("INPUT")[0];originalValue=textInput.value;}
else{self.hide();}};var getColor=function(event,obj){var nwOffset=Coordinates.northwestOffset(obj,true);mousePos.update(event);var x=mousePos.x-nwOffset.x;var y=mousePos.y-nwOffset.y;var rmax=0;var gmax=0;var bmax=0;if(y<=32){rmax=255;gmax=(y/32.0)*255;bmax=0;}else if(y<=64){y=y-32;rmax=255-(y/32.0)*255;gmax=255;bmax=0;}else if(y<=96){y=y-64;rmax=0;gmax=255;bmax=(y/32.0)*255;}else if(y<=128){y=y-96;rmax=0;gmax=255-(y/32.0)*255;bmax=255;}else if(y<=160){y=y-128;rmax=(y/32.0)*255;gmax=0;bmax=255;}else{y=y-160;rmax=255;gmax=0;bmax=255-(y/32.0)*255;}
if(x<=50){var r=Math.abs(Math.floor(rmax*x/50.0));var g=Math.abs(Math.floor(gmax*x/50.0));var b=Math.abs(Math.floor(bmax*x/50.0));}else{x-=50;var r=Math.abs(Math.floor(rmax+(x/50.0)*(255-rmax)));var g=Math.abs(Math.floor(gmax+(x/50.0)*(255-gmax)));var b=Math.abs(Math.floor(bmax+(x/50.0)*(255-bmax)));}
return rgb2hex(r,g,b);};var rgb2hex=function(r,g,b){color='#';color+=hex(Math.floor(r/16));color+=hex(r%16);color+=hex(Math.floor(g/16));color+=hex(g%16);color+=hex(Math.floor(b/16));color+=hex(b%16);return color;};var hex=function(dec){return(dec).toString(16);};var onEnd=function(event){var color=getColor(event,image);originalValue=color;textInput.value=color;self.hide();};var onMove=function(event){var color=getColor(event,image);textInput.value=color;textInput.onchange();};var reset=function(){textInput.value=originalValue;textInput.onchange();};image.onmousemove=onMove;image.onclick=onEnd;image.onmouseout=reset;}
var Coordinates={ORIGIN:new Coordinate(0,0),northwestPosition:function(element){var x=parseInt(element.style.left);var y=parseInt(element.style.top);return new Coordinate(isNaN(x)?0:x,isNaN(y)?0:y);},southeastPosition:function(element){return Coordinates.northwestPosition(element).plus(new Coordinate(element.offsetWidth,element.offsetHeight));},northwestOffset:function(element,isRecursive){var offset=new Coordinate(element.offsetLeft,element.offsetTop);if(!isRecursive)return offset;var parent=element.offsetParent;while(parent){offset=offset.plus(new Coordinate(parent.offsetLeft,parent.offsetTop));parent=parent.offsetParent;}
return offset;},southeastOffset:function(element,isRecursive){return Coordinates.northwestOffset(element,isRecursive).plus(new Coordinate(element.offsetWidth,element.offsetHeight));},fixEvent:function(event){if(typeof event=='undefined'){event=window.event;}
event.windowCoordinate=new Coordinate(event.clientX,event.clientY);return event;}};function Coordinate(x,y){this.x=x;this.y=y;}
Coordinate.prototype.toString=function(){return"("+this.x+","+this.y+")";}
Coordinate.prototype.plus=function(that){return new Coordinate(this.x+that.x,this.y+that.y);}
Coordinate.prototype.minus=function(that){return new Coordinate(this.x-that.x,this.y-that.y);}
Coordinate.prototype.distance=function(that){var deltaX=this.x-that.x;var deltaY=this.y-that.y;return Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));}
Coordinate.prototype.max=function(that){var x=Math.max(this.x,that.x);var y=Math.max(this.y,that.y);return new Coordinate(x,y);}
Coordinate.prototype.constrain=function(min,max){if(min.x>max.x||min.y>max.y)return this;var x=this.x;var y=this.y;if(min.x!=null)x=Math.max(x,min.x);if(max.x!=null)x=Math.min(x,max.x);if(min.y!=null)y=Math.max(y,min.y);if(max.y!=null)y=Math.min(y,max.y);return new Coordinate(x,y);}
Coordinate.prototype.reposition=function(element){element.style["top"]=this.y+"px";element.style["left"]=this.x+"px";}
Coordinate.prototype.equals=function(that){if(this==that)return true;if(!that||that==null)return false;return this.x==that.x&&this.y==that.y;}
Coordinate.prototype.inside=function(northwest,southeast){if((this.x>=northwest.x)&&(this.x<=southeast.x)&&(this.y>=northwest.y)&&(this.y<=southeast.y)){return true;}
else{return false;}}
Coordinate.prototype.insideObject=function(obj,recurse){var nwOffset=Coordinates.northwestOffset(obj,recurse);var seOffset=nwOffset.plus(new Coordinate(obj.offsetWidth,obj.offsetHeight));var rt=null
if(this.inside(nwOffset,seOffset)){rt=this.minus(nwOffset);rt.nwOffset=nwOffset;rt.seOffset=seOffset;}
return rt;}
function getMousePos(event){mousePos.update(event);}
function MousePos(){};MousePos.prototype=new Coordinate(0,0);MousePos.prototype.update=function(event){event=Coordinates.fixEvent(event);var position=event.windowCoordinate;this.x=position.x;this.y=position.y;if(is_safari){}
else{this.x+=document.body.scrollLeft;this.y+=document.body.scrollTop;}
if(this.x<0)
this.x=0;if(this.y<0)
this.y=0;return event;}
var mousePos=new MousePos(0,0);var Drag={group:null,isDragging:false,makeDraggable:function(group,handle){if(handle==null)
group.handle=group;else
group.handle=handle;group.handle.group=group;group.minX=null;group.minY=null;group.maxX=null;group.maxY=null;group.threshold=1;group.thresholdY=0;group.thresholdX=0;group.disableDrag=false;group.onDragStart=new Function();group.onDragEnd=new Function();group.onDrag=new Function();group.setAutoCorrect=function(){this.autoCorrect=true};group.setDragHandle=Drag.setDragHandle;group.setDragThreshold=Drag.setDragThreshold;group.setDragThresholdX=Drag.setDragThresholdX;group.setDragThresholdY=Drag.setDragThresholdY;group.constrain=Drag.constrain;group.constrainVertical=Drag.constrainVertical;group.constrainHorizontal=Drag.constrainHorizontal;group.handle.onmousedown=Drag.onMouseDown;},constrainVertical:function(){var nwOffset=Coordinates.northwestOffset(this,true);this.minX=nwOffset.x;this.maxX=nwOffset.x;},constrainHorizontal:function(){var nwOffset=Coordinates.northwestOffset(this,true);this.minY=nwOffset.y;this.maxY=nwOffset.y;},constrain:function(nwPosition,sePosition){this.minX=nwPosition.x;this.minY=nwPosition.y;this.maxX=sePosition.x;this.maxY=sePosition.y;},setDragHandle:function(handle){if(handle&&handle!=null)
this.handle=handle;else
this.handle=this;this.handle.group=this;this.onmousedown=null;this.handle.onmousedown=Drag.onMouseDown;},setDragThreshold:function(threshold){if(isNaN(parseInt(threshold)))return;this.threshold=threshold;},setDragThresholdX:function(threshold){if(isNaN(parseInt(threshold)))return;this.thresholdX=threshold;},setDragThresholdY:function(threshold){if(isNaN(parseInt(threshold)))return;this.thresholdY=threshold;},onMouseDown:function(event){event=mousePos.update(event);Drag.group=this.group;var group=this.group;if(group.disableDrag){return;}
var mouse=mousePos;var nwPosition=Coordinates.northwestPosition(group);var nwOffset=Coordinates.northwestOffset(group,true);var sePosition=Coordinates.southeastPosition(group);var seOffset=Coordinates.southeastOffset(group,true);group.originalZIndex=group.style.zIndex;group.mouseNwOffset=mouse.minus(nwOffset);group.mouseSeOffset=mouse.minus(seOffset);group.mouseStart=new Coordinate(mousePos.x,mousePos.y);group.onDragStart(nwPosition,sePosition,nwOffset,seOffset);var minMouseX;var minMouseY;var maxMouseX;var maxMouseY;if(group.minX!=null)
minMouseX=group.minX+group.mouseNwOffset.x;if(group.minY!=null)
minMouseY=group.minY+group.mouseNwOffset.y;if(group.maxX!=null)
maxMouseX=group.maxX+group.mouseSeOffset.x;if(group.maxY!=null)
maxMouseY=group.maxY+group.mouseSeOffset.y;if(minMouseX&&maxMouseX&&minMouseX>maxMouseX)
maxMouseX=minMouseX;if(minMouseY&&maxMouseY&&minMouseY>maxMouseY)
maxMouseY=minMouseY;group.mouseMin=new Coordinate(minMouseX,minMouseY);group.mouseMax=new Coordinate(maxMouseX,maxMouseY);document.onmousemove=Drag.onMouseMove;document.onmouseup=Drag.onMouseUp;return false;},showStatus:function(mouse,nwPosition,sePosition,nwOffset,seOffset){window.status="mouse: "+mouse.toString()+" "+"NW pos: "+nwPosition.toString()+" "+"SE pos: "+sePosition.toString()+" "+"NW offset: "+nwOffset.toString()+" "+"SE offset: "+seOffset.toString();},onMouseMove:function(event){event=mousePos.update(event);var group=Drag.group;var mouse=mousePos;var nwOffset=Coordinates.northwestOffset(group,true);var nwPosition=Coordinates.northwestPosition(group);var sePosition=Coordinates.southeastPosition(group);var seOffset=Coordinates.southeastOffset(group,true);var scrollZone=20;var scrollSpeed=5;var scrollTop=Viewport.scroll().y;var pageHeight=Viewport.page().y;var clientHeight=Viewport.frame().y;if((scrollTop+clientHeight+2*scrollZone)<pageHeight&&mousePos.y>(scrollTop+clientHeight-scrollZone)){window.scroll(0,scrollTop+scrollSpeed);nwPosition.y+=scrollSpeed;}
if(scrollTop>0&&mousePos.y<(scrollTop+scrollZone)){window.scroll(0,scrollTop-scrollSpeed);nwPosition.y-=scrollSpeed;}
var adjusted=mouse.constrain(group.mouseMin,group.mouseMax);nwPosition=nwPosition.plus(adjusted.minus(nwOffset).minus(group.mouseNwOffset));if(!Drag.isDragging){if(group.threshold>0){var distance=group.mouseStart.distance(mouse);if(distance<group.threshold)return true;}else if(group.thresholdY>0){var deltaY=Math.abs(group.mouseStart.y-mouse.y);if(deltaY<group.thresholdY)return true;}else if(group.thresholdX>0){var deltaX=Math.abs(group.mouseStart.x-mouse.x);if(deltaX<group.thresholdX)return true;}
Drag.isDragging=true;}
nwPosition.reposition(group);if(group.autoCorrect){var offsetBefore=Coordinates.northwestOffset(group,true);group.onDrag(nwPosition,sePosition,nwOffset,seOffset);var offsetAfter=Coordinates.northwestOffset(group,true);if(!offsetBefore.equals(offsetAfter)){var errorDelta=offsetBefore.minus(offsetAfter);nwPosition=Coordinates.northwestPosition(group).plus(errorDelta);nwPosition.reposition(group);}}
else{nwPosition.reposition(group);group.onDrag(nwPosition,sePosition,nwOffset,seOffset);}
return false;},onMouseUp:function(event){event=mousePos.update(event);var group=Drag.group;var mouse=event.windowCoordinate;var nwOffset=Coordinates.northwestOffset(group,true);var nwPosition=Coordinates.northwestPosition(group);var sePosition=Coordinates.southeastPosition(group);var seOffset=Coordinates.southeastOffset(group,true);document.onmousemove=null;document.onmouseup=null;group.onDragEnd(nwPosition,sePosition,nwOffset,seOffset);Drag.group=null;Drag.isDragging=false;return false;}};var DropZone={layerArray:new Array(),dropList:new Array(),initialized:false,checkInit:function(){if(!DropZone.initialized){DropZone.init();DropZone.initialized=true;};},add:function(itemId,dropOptions){DropZone.checkInit();var item=_$J.getOne(itemId);if(item){item.dropOptions=dropOptions||new Object();item.dropOptions.dropItem=item;if(typeof(dropOptions.accept)=="string"){dropOptions.accept=dropOptions.accept.split(" ");}
DropZone.dropList.push(item);}},init:function(){this.layerArray[0]=new Array();this.layerArray[1]=new Array();this.dropList=this.layerArray[0];},switchLayer:function(layer){DropZone.checkInit();if(layer==0||layer==1){this.dropList=this.layerArray[layer];}}}
var DragDrop={clone:null,currentContainer:null,insertIndex:-1,instance:0,lastContainer:null,track:null,lastOnDrop:null,lastSelected:null,accepts:function(item,dropItem){var dropOptions=dropItem.dropOptions;var rt=false;if(dropOptions.accept){var accepts=dropOptions.accept;for(var i=0;i<accepts.length;i++){if(_$J(item).is("."+accepts[i])){rt=true;break;}}}
else{rt=true;}
return rt;},create:function(itemId,dragOptions){var item;if(typeof(itemId)=="string"){item=document.getElementById(itemId);}
else if(typeof(itemId)=="object"){item=itemId;}
else{return;}
item.dragOptions=dragOptions?dragOptions:new Object();item.dragOptions.scrollOffset=new Coordinate(0,0);Drag.makeDraggable(item,item.dragOptions.handle);item.onDragStart=DragDrop.onDragStart;item.onDrag=DragDrop.onDrag;item.onDragEnd=DragDrop.onDragEnd;item.threshold=3;},onDragStart:function(nwPosition,sePosition,nwOffset,seOffset){var item=this;},onDrag:function(nwPosition,sePosition,nwOffset,seOffset){var item=this;var opts=item.dragOptions;if(!item.initialized){var body=document.getElementsByTagName("body")[0];var itemContainer=item.parentNode;var clone=DragDrop.clone;if(is_ie){Liferay.Util.setSelectVisibility("hidden");}
opts.origWidth=item.style.width;opts.origHeight=item.style.height;opts.origPosition=item.style.position;opts.origRevert=opts.revert;opts.scrollOffset=new Coordinate(0,0);if(opts.container){var container=_$J.getOne(opts.container);opts.scrollOffset.x=container.scrollLeft;opts.scrollOffset.y=container.scrollTop;}
clone=DragDrop.clone=item.cloneNode(opts.showClone?true:false);if(!opts.showClone){clone.style.backgroundColor="transparent";}
clone.dragOptions=new cloneObject(opts);clone.style.left="";clone.style.top="";clone.style.zIndex=0;if(!opts.showClone){clone.style.height=item.offsetHeight+"px";clone.style.width=item.offsetWidth+"px";}
item.dragOptions.clone=clone;item.style.width=item.offsetWidth+"px";item.style.height=item.offsetHeight+"px";itemContainer.insertBefore(clone,item);itemContainer.removeChild(item);if(opts.showClone||opts.ghosting){Element.changeOpacity(item,75);}
item.style.position="absolute";item.style.zIndex=ZINDEX.DRAG_ITEM;item.style.left=(nwOffset.x-opts.scrollOffset.x)+"px";item.style.top=(nwOffset.y-opts.scrollOffset.y)+"px";body.appendChild(item);var dropList=DropZone.dropList;_$J(dropList).each(function(i){var item=this;if(item.dropOptions.inheritParent){item.style.height=item.parentNode.offsetHeight;}});DragDrop.lastOnDrop=null;item.initialized=true;}
else{item.style.left=(parseInt(item.style.left)-opts.scrollOffset.x)+"px";item.style.top=(parseInt(item.style.top)-opts.scrollOffset.y)+"px";var dropList=DropZone.dropList;DragDrop.currentContainer=null;for(var i=0;i<dropList.length;i++){var dropContainer=dropList[i];if(!dropContainer.parentNode||typeof(dropContainer)=="undefined"){dropList.splice(i,1);i--;continue;}
var isInsideContainer=mousePos.insideObject(dropContainer,true);if(DragDrop.accepts(item,dropContainer)){if(opts.highlightDropzones){dropContainer.style.backgroundColor=opts.highlightDropzones;}
if(isInsideContainer){DragDrop.currentContainer=dropContainer;DragDrop.lastOnDrop=dropContainer.dropOptions.onDrop;}}}
var cur=DragDrop.currentContainer;var last=DragDrop.lastContainer;if(cur){if(typeof(cur.dropOptions.onHoverOver)!="undefined"){cur.dropOptions.onHoverOver(item);}}
if(cur!=last){if(last){_$J(last).removeClass(last.dropOptions.hoverclass);if(typeof(last.dropOptions.onHoverOut)!="undefined"){last.dropOptions.onHoverOut(item);}}
if(cur){if(cur.dropOptions.hoverclass&&cur!=item&&DragDrop.accepts(item,cur)){_$J(cur).addClass(cur.dropOptions.hoverclass);}}}
DragDrop.lastContainer=DragDrop.currentContainer;}},onDragEnd:function(nwPosition,sePosition,nwOffset,seOffset){var item=this;var opts=item.dragOptions;if(item.initialized){var dropItem=DragDrop.currentContainer;if(dropItem&&typeof(dropItem.dropOptions.onDrop)!="undefined"){var dropOptions=dropItem.dropOptions;if(DragDrop.accepts(item,dropItem)){dropOptions.onDrop(item,nwPosition,sePosition,nwOffset,seOffset);dropItem.className=dropOptions.origClassName;_$J(dropItem).removeClass(dropItem.dropOptions.hoverclass);}}
else if(opts.forceDrop&&DragDrop.lastOnDrop){DragDrop.lastOnDrop();}
var clone=DragDrop.clone;var container=clone.parentNode;if(opts.keepClone){DragDrop.create(clone,clone.dragOptions);item.style.zIndex="";}
else{if(opts.revert){item.parentNode.removeChild(item);item.style.width=opts.origWidth;item.style.height=opts.origHeight;item.style.position=opts.origPosition;item.style.left="";item.style.top="";clone.style.display="none";container.insertBefore(item,clone);}
container.removeChild(clone);}
Element.changeOpacity(item,100);item.style.zIndex="";opts.scrollOffset=new Coordinate(0,0);if(is_ie){Liferay.Util.setSelectVisibility("visible");}
_$J(DropZone.dropList).each(function(i){var item=this;item.style.backgroundColor="transparent";if(item.dropOptions.inheritParent){item.style.height="";}});opts.revert=opts.origRevert;item.initialized=false;item.wasClicked=false;}
else{item.wasClicked=true;}}}
function ResizeRule(element,direction,mode){this.element=element;this.direction=direction;this.next=null;this.origWidth=null;this.origHeight=null;this.mode=mode;}
var Resize={BIG_Z_INDEX:100,group:null,isResizeing:false,HORIZONTAL:0,VERTICAL:1,ADD:0,SUBTRACT:1,addRule:function(resizeRule){var group=this;if(group.listHead==null){group.listHead=resizeRule;group.listTail=group.listHead;}
else{group.listTail.next=resizeRule;group.listTail=resizeRule;}},createHandle:function(group,disableStop,func){group.onmousedown=Resize.onMouseDown;group.addRule=Resize.addRule;group.listHead=null;group.listTail=null;group.disableStop=disableStop==null?false:true;group.onResizeStart=new Function();group.onResize=new Function();group.onResizeEnd=new Function();group.func=func;return group;},getHeight:function(obj){var debugDiv=document.getElementById("debug_div");if(obj.style&&obj.style.height&&obj.style.height!=""){return parseInt(obj.style.height);}
else{return obj.offsetHeight;}},getWidth:function(obj){if(obj.style&&obj.style.width&&obj.style.width!=""){return parseInt(obj.style.width);}
else{return obj.offsetWidth;}},onMouseDown:function(event){event=mousePos.update(event);Resize.group=this;var group=Resize.group;var mouse=mousePos;group.mouseStart=new Coordinate(mousePos.x,mousePos.y);var resizeRule=group.listHead;while(resizeRule){resizeRule.origWidth=Resize.getWidth(resizeRule.element);resizeRule.origHeight=Resize.getHeight(resizeRule.element);resizeRule=resizeRule.next;}
document.onmousemove=Resize.onMouseMove;document.onmouseup=Resize.onMouseUp;document.getElementsByTagName("body")[0].style.cursor=group.style.cursor;group.onResizeStart();return false;},onMouseMove:function(event){event=mousePos.update(event);var group=Resize.group;var mouse=mousePos;var mouseDelta=mousePos.minus(group.mouseStart);var resizeRule=group.listHead;var newLength;var lengthCorrection=0;var noChange=false;while(resizeRule){if(resizeRule.direction==Resize.HORIZONTAL){resizeRule.prevLength=Resize.getWidth(resizeRule.element);if(resizeRule.mode==Resize.ADD){newLength=resizeRule.origWidth+mouseDelta.x;}
else{newLength=resizeRule.origWidth-mouseDelta.x}}
else if(resizeRule.direction==Resize.VERTICAL){resizeRule.prevLength=Resize.getHeight(resizeRule.element);if(resizeRule.mode==Resize.ADD){newLength=resizeRule.origHeight+mouseDelta.y;}
else{newLength=resizeRule.origHeight-mouseDelta.y;}}
resizeRule.newLength=newLength;if(newLength<1){lengthCorrection=Math.max(-newLength+1,lengthCorrection);newLength=1;}
if(newLength==resizeRule.prevLength){noChange=true;}
resizeRule=resizeRule.next;}
resizeRule=group.listHead;while(resizeRule){if(!group.disableStop&&noChange){newLength=resizeRule.prevLength;}
else if(resizeRule.newLength<1){newLength=resizeRule.newLength+lengthCorrection;}
else{newLength=resizeRule.newLength-lengthCorrection;}
if(resizeRule.direction==Resize.HORIZONTAL){resizeRule.element.style.width=newLength+"px";}
else if(resizeRule.direction==Resize.VERTICAL){resizeRule.element.style.height=newLength+"px";}
resizeRule=resizeRule.next;}
group.onResize();return false;},onMouseUp:function(event){event=mousePos.update(event);var group=Resize.group;var mouse=event.windowCoordinate;group.mouseEnd=new Coordinate(mousePos.x,mousePos.y);group.onResizeEnd();document.onmousemove=null;document.onmouseup=null;document.getElementsByTagName("body")[0].style.cursor="auto";Resize.group=null;if(group.func!=null){group.func();}
return false;}};var LayoutConfiguration={categories:new Array(),initialized:false,loadingImage:null,menu:null,menuDiv:null,menuIframe:null,portlets:new Array(),showTimer:0,init:function(){var arrow1=new Image();var arrow2=new Image();arrow1.src=themeDisplay.getPathThemeImage()+"/arrows/01_down.gif";arrow2.src=themeDisplay.getPathThemeImage()+"/arrows/01_right.gif";var menu=document.getElementById("portal_add_content");LayoutConfiguration.menu=menu;if(menu!=null){var list=menu.childNodes;for(var i=0;i<list.length;i++){if(list[i].className!=null&&list[i].className.match("portal-add-content")){LayoutConfiguration.menuDiv=list[i];}
if(list[i].nodeName!=null&&list[i].nodeName.toLowerCase().match("iframe")){LayoutConfiguration.menuIframe=list[i];}}
var elems=menu.getElementsByTagName("div");for(var i=0;i<elems.length;i++){if(elems[i].className=="layout_configuration_portlet"){LayoutConfiguration.portlets.push(elems[i]);}
else if(elems[i].className=="layout_configuration_category"){LayoutConfiguration.categories.push(elems[i]);}}
LayoutConfiguration.initialized=true;if(is_ie){document.getElementById("layout_configuration_content").focus();}}},toggle:function(plid,ppid,doAsUserId){if(!LayoutConfiguration.menu){var url=themeDisplay.getPathMain()+"/portal/render_portlet?p_l_id="+plid+"&p_p_id="+ppid+"&doAsUserId="+doAsUserId;var popup=Alerts.fireMessageBox({width:250,noCenter:true,title:"Add Content",onClose:function(){LayoutConfiguration.menu=null;}});AjaxUtil.update(url,popup,{onComplete:LayoutConfiguration.init});}},startShowTimer:function(word){if(this.showTimer){clearTimeout(this.showTimer);this.showTimer=0;}
this.showTimer=setTimeout("LayoutConfiguration.showMatching(\""+word+"\")",250);},showMatching:function(word){var portlets=this.portlets;var categories=this.categories;if(word=="*"){for(var i=0;i<portlets.length;i++){portlets[i].style.display="block";}
for(var i=0;i<categories.length;i++){categories[i].style.display="block";this.toggleCategory(categories[i].getElementsByTagName("table")[0],"block");}}
else if(word==""){for(var i=0;i<categories.length;i++){categories[i].style.display="block";this.toggleCategory(categories[i].getElementsByTagName("table")[0],"none");}
for(var i=0;i<portlets.length;i++){portlets[i].style.display="block";}}
else{word=word.toLowerCase();for(var i=0;i<categories.length;i++){categories[i].style.display="none";}
for(var i=0;i<portlets.length;i++){if(portlets[i].id.toLowerCase().match(word)){portlets[i].style.display="block";this.showCategories(categories,portlets[i].id);}
else{portlets[i].style.display="none";}}}},showCategories:function(categories,name){var colon=name.lastIndexOf(":");while(colon!=-1){name=name.substr(0,colon);for(var i=0;i<categories.length;i++){if(name.match(categories[i].id)){categories[i].style.display="block";this.toggleCategory(categories[i].getElementsByTagName("table")[0],"block");}}
colon=name.lastIndexOf(":");}},toggleCategory:function(obj,display){var parent=obj;while(parent.nodeName.toLowerCase()!="table"){parent=parent.parentNode;}
var data=parent.rows[1].cells[0];var pane=_$J(".layout_configuration_category_pane:first",data).get(0);var image=obj.getElementsByTagName("img")[0];var imagePath=themeDisplay.getPathThemeImage();if(display){pane.style.display=display;if(display.toLowerCase().match("block")){image.src=imagePath+"/arrows/01_down.gif";}
else{image.src=imagePath+"/arrows/01_right.gif";}}
else{if(Liferay.Util.toggle(pane,true)){image.src=imagePath+"/arrows/01_down.gif";}
else{image.src=imagePath+"/arrows/01_right.gif";}}}};var Messaging={checkRoster:false,currentChatBox:null,initialized:false,inputCount:1,mainDiv:null,msgQueue:new Array(),userId:null,windowCount:0,zIndex:1,chat:function(msgObj){if(!msgObj&&Messaging.msgQueue.length==0)return;var msg=msgObj||Messaging.msgQueue.shift();var chatBox=_$J.getOne("#msg-chat-box_"+msg.toId.replace(/\./g,"_"),Messaging.mainDiv,true);if(!chatBox){var url=themeDisplay.getPathMain()+"/messaging/action?cmd=chatbox"+"&toId="+msg.toId+"&toName="+encodeURIComponent(msg.toName)+"&top="+(msg.top||15*this.windowCount)+"&left="+(msg.left||15*this.windowCount++)+"&zIndex="+(ZINDEX.CHAT_BOX+this.zIndex++);if(msg.status&&msg.status=="unavailable"){url+="&addUser=1";}
if(msg.messages){url+="&messages="+msg.messages;}
AjaxUtil.request(url,{returnArgs:msg,onComplete:function(xmlHttpReq,returnArgs){var chatBox=Messaging.createChatBox(xmlHttpReq.responseText);Messaging.populateChatBox(chatBox,returnArgs);}});}
else{this.populateChatBox(chatBox,msg);}},populateChatBox:function(chatBox,msg){var typeArea=_$J.getOne(".msg-type-area",chatBox);var chatArea=_$J.getOne(".msg-chat-area",chatBox);if(msg.body!=null){var name=msg.toName.split(/[ ,.-]/);var initials="";for(var i=0;i<name.length;i++){initials+=name[i].charAt(0);}
chatArea.innerHTML+="<span style='color: #FF0000'>"+initials+": </span>"+msg.body+"<br/>";}
this.saveCookie();chatArea.scrollTop=chatArea.scrollHeight;typeArea.focus();if(is_ie){typeArea.focus();}
Messaging.chat();},getChats:function(){var url=themeDisplay.getPathMain()+"/messaging/action?cmd=getChats";AjaxUtil.request(url,{onComplete:function(xmlHttpReq){var msg=eval("("+xmlHttpReq.responseText+")");Messaging.getChatsReturn(msg);}});},getChatsReturn:function(msg){var status=msg.status;if(status=="success"){var chatMsg=msg.chat;if(chatMsg&&chatMsg.length>0){for(var i=0;i<chatMsg.length;i++){var tmpName=chatMsg[i].fromName;var tmpId=chatMsg[i].fromId;chatMsg[i].fromName=chatMsg[i].toName;chatMsg[i].fromId=chatMsg[i].toId;chatMsg[i].toName=tmpName;chatMsg[i].toId=tmpId;Messaging.msgQueue.push(chatMsg[i]);}
Messaging.chat();window.focus();}}},createChatBox:function(boxHTML){var chatDiv=document.createElement("div");chatDiv.innerHTML=boxHTML;var chatBox=_$J.getOne(".msg-chat-box",chatDiv);var chatTitle=_$J.getOne(".msg-chat-title",chatBox);Drag.makeDraggable(chatBox,chatTitle);chatBox.onDragEnd=function(){Messaging.saveCookie();};chatDiv.removeChild(chatBox);this.mainDiv.appendChild(chatBox);return chatBox;},error:function(){alert("User does not exist");},init:function(userId){var body=document.getElementsByTagName("body")[0];var mainDiv=_$J.getOne("#messaging-main-div");this.userId=userId;if(mainDiv==null){mainDiv=document.createElement("div");mainDiv.id="messaging-main-div";_$J(mainDiv).css({left:0,position:"absolute",textAlign:"left",top:0,width:"100%",zIndex:""+ZINDEX.CHAT_BOX});body.insertBefore(mainDiv,body.childNodes[0]);}
this.mainDiv=mainDiv;var msgJSON=_$J.cookie(this.userId+"_chats");if(msgJSON){var chatArray=$J(msgJSON);for(var i=0;i<chatArray.length;i++){Messaging.msgQueue.push(chatArray[i]);}
Messaging.chat();}
this.initialized=true;Messaging.getChats();},maximizeChat:function(id){var chatBox=_$J.getOne(id);var widthDiv=_$J.getOne(".msg-chat-box-width");var chatArea=_$J.getOne(".msg-chat-area");chatBox.style.left=Viewport.scroll().x+"px";chatBox.style.top=Viewport.scroll().y+"px";widthDiv.style.width=(Viewport.frame().x-30)+"px";chatArea.style.height=(Viewport.frame().y-100)+"px";},minimizeChat:function(id){var chatBox=_$J.getOne(id);var widthDiv=_$J.getOne(".msg-chat-box-width");var chatArea=_$J.getOne(".msg-chat-area");widthDiv.style.width=250+"px";chatArea.style.height=100+"px";},removeChat:function(id){var chatBox=_$J.getOne(id);Element.remove(chatBox);this.saveCookie();},saveCookie:function(){var chatList=_$J(".msg-chat-box",this.mainDiv);var chatArray=new Array();jsonString="[";chatList.each(function(i){var item=this;var msgObj=new Object();msgObj.toName=_$J.getOne(".msg-to-name",item).innerHTML;msgObj.toId=_$J.getOne(".msg-to-input-id",item).value;msgObj.top=parseInt(item.style.top);msgObj.left=parseInt(item.style.left);msgObj.messages=_$J.getOne(".msg-chat-area",item).innerHTML;chatArray.push(msgObj);jsonString+="{"
+"toName:\""+(_$J.getOne(".msg-to-name",item).innerHTML)+"\","
+"toId:\""+(_$J.getOne(".msg-to-input-id",item).value)+"\","
+"top:"+parseInt(item.style.top)+","
+"left:"+parseInt(item.style.left)+","
+"messages:\""+encodeURIComponent(_$J.getOne(".msg-chat-area",item).innerHTML)+"\"}";if(i<chatList.length-1){jsonString+=",";}})
jsonString+="]";_$J.cookie(this.userId+"_chats",jsonString);},sendChat:function(obj,e){var keycode;var chatBox=obj.parentNode;var toInput;var toAddr;var typeArea;var chatArea;var query="cmd=sendChat";if(window.event)keycode=window.event.keyCode;else if(e)keycode=e.which;else return;if(keycode==13){var inputList=chatBox.getElementsByTagName("input");for(var i=0;i<inputList.length;i++){if(inputList[i].className){if(inputList[i].className.match("msg-to-input-id"))toInput=inputList[i];if(inputList[i].className.match("msg-to-input-addr"))toAddr=inputList[i];if(inputList[i].className.match("msg-type-area"))typeArea=inputList[i];}}
if(typeArea.value=="")return;var divList=chatBox.getElementsByTagName("div");for(var i=0;i<divList.length;i++){if(divList[i].className&&divList[i].className.match("msg-chat-area"))chatArea=divList[i];}
query+="&text="+encodeURIComponent(typeArea.value);if(toAddr!=null){query+="&tempId="+toInput.value+"&toAddr="+toAddr.value;}
else{query+="&toId="+toInput.value;}
loadPage(themeDisplay.getPathMain()+"/messaging/action",query,Messaging.sendChatReturn);chatArea.innerHTML+="<span style='color: #0000FF'>Me: </span>"+typeArea.value+"<br/>";chatArea.scrollTop=chatArea.scrollHeight;typeArea.value="";Messaging.saveCookie();}},sendChatReturn:function(xmlHttpReq){var msg=eval("("+xmlHttpReq.responseText+")");if(msg.status=="success"){Messaging.populateChatBox(msg);}
else{Messaging.error();}}}
var MessagingRoster={highlightColor:"",lastSelected:null,addEntry:function(userId){var url;if(userId){url=themeDisplay.getPathMain()+"/chat/roster?cmd=addEntry&userId="+userId;}
else{var email=_$J.getOne("#portlet-chat-roster-email").value;url=themeDisplay.getPathMain()+"/chat/roster?cmd=addEntry&email="+email}
AjaxUtil.request(url,{onComplete:MessagingRoster.addEntryReturn});},addEntryReturn:function(xmlHttpReq){try{var msg=eval("("+xmlHttpReq.responseText+")");if(msg.status=="failure"){alert("No such user exists");}
else{var rosterDiv=_$J.getOne("#portlet-chat-roster-list");if(rosterDiv){var entries=_$J(".portlet-chat-roster-entry",rosterDiv);var userId=msg.user;var userExists=entries.filter(function(i){return(this.userId==userId);});if(userExists.length!=0){var entryRow=MessagingRoster.createEntryRow(msg.user,msg.name);rosterDiv.appendChild(entryRow);}
MessagingRoster.toggleEmail();}}}
catch(err){}},createEntryRow:function(userId,userName,online){var tempDiv=document.createElement("div");var tempImg=document.createElement("img");var tempLink=document.createElement("a");tempImg.align="absmiddle";tempImg.style.marginRight="5px";if(online){tempImg.src=themeDisplay.getPathThemeImage()+"/chat/user_online.gif";}
else{tempImg.src=themeDisplay.getPathThemeImage()+"/chat/user_offline.gif";}
tempLink.innerHTML=userName;tempLink.href="javascript: void(0)";tempLink.onclick=MessagingRoster.onEntryLinkClick;tempDiv.appendChild(tempImg);tempDiv.appendChild(tempLink);tempDiv.onclick=MessagingRoster.onEntryClick;tempDiv.userId=userId;tempDiv.userName=userName;tempDiv.style.cursor="pointer";tempDiv.className="portlet-chat-roster-entry";return tempDiv;},deleteEntries:function(){if(MessagingRoster.lastSelected){var userId=MessagingRoster.lastSelected.userId;var lastSelected=MessagingRoster.lastSelected;lastSelected.parentNode.removeChild(lastSelected);MessagingRoster.lastSelected=null;loadPage(themeDisplay.getPathMain()+"/chat/roster","cmd=deleteEntries&entries="+userId,MessagingRoster.deleteEntriesReturn);}},deleteEntriesReturn:function(xmlHttpReq){try{var msg=eval("("+xmlHttpReq.responseText+")");}
catch(err){}},getEntries:function(){var url=themeDisplay.getPathMain()+"/chat/roster?cmd=getEntries";AjaxUtil.request(url,{onComplete:function(xmlHttpReq){var msg=eval("("+xmlHttpReq.responseText+")");MessagingRoster.getEntriesReturn(msg);}});},getEntriesReturn:function(msg){MessagingRoster.updateEntries(msg.roster);},updateEntries:function(roster){var rosterDiv=_$J.getOne("#portlet-chat-roster-list");if(rosterDiv!=null){rosterDiv.innerHTML="";}
else{Messaging.checkRoster=false;return;}
for(var i=0;i<roster.length;i++){var entry=roster[i];var tempDiv=MessagingRoster.createEntryRow(entry.user,entry.name,entry.status=="available");rosterDiv.appendChild(tempDiv);}},onEmailKeypress:function(obj,event){var keyCode;if(window.event)keyCode=window.event.keyCode;else if(event)keyCode=event.which;else return;if(keyCode==13){MessagingRoster.addEntry();}},onEntryClick:function(){if(MessagingRoster.lastSelected!=null){MessagingRoster.lastSelected.style.backgroundColor="transparent";}
this.style.backgroundColor=MessagingRoster.highlightColor;MessagingRoster.lastSelected=this;},onEntryLinkClick:function(){var parent=this.parentNode;Messaging.chat({toId:parent.userId,toName:parent.userName});},toggleEmail:function(){emailDiv=_$J.getOne("#portlet-chat-roster-email-div");if(emailDiv.style.display=="none"){emailDiv.style.display="block";emailInput=_$J.getOne("#portlet-chat-roster-email");emailInput.value="";emailInput.focus();}
else{emailDiv.style.display="none";}}}