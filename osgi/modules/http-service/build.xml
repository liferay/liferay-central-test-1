<?xml version="1.0"?>

<project name="http-service" basedir="." default="compile" xmlns:antelope="antlib:ise.antelope.tasks">
	<import file="../build-module.xml" />

	<property name="jar.file" value="${ant.project.name}" />

	<target name="compile">
		<if>
			<not>
				<uptodate targetfile="classes/.touch">
					<srcfiles dir="src" includes="**/*.*" />
				</uptodate>
			</not>
			<then>
				<ant dir="${project.dir}/osgi/bootstrap" target="jar" inheritall="false" />

				<path id="this.classpath">
					<fileset dir="${project.dir}/osgi/bootstrap" includes="osgi-bootstrap.jar" />
					<path refid="project.classpath" />
				</path>

				<mkdir dir="classes" />

				<antcall target="compile-java" inheritrefs="true">
					<param name="javac.classpathref" value="this.classpath" />
					<param name="javac.destdir" value="classes" />
					<param name="javac.srcdir" value="src" />
				</antcall>
			</then>
		</if>
	</target>
</project>