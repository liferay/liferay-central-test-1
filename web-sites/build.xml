<?xml version="1.0"?>

<project name="web-sites" basedir="." default="war">
	<import file="../build-common.xml" />

	<target name="clean">
		<delete>
			<fileset dir="." includes="*.war" />
		</delete>
	</target>

	<target name="war">
		<java
			classname="com.liferay.portal.tools.WebSiteWar"
			classpathref="project.classpath"
			fork="true"
			newenvironment="true"
		/>
	</target>

	<target name="deploy" depends="war">
		<if>
			<or>
				<equals arg1="${app.server.type}" arg2="jboss-jetty" />
				<equals arg1="${app.server.type}" arg2="jboss-tomcat" />
				<equals arg1="${app.server.type}" arg2="jonas-jetty" />
				<equals arg1="${app.server.type}" arg2="jonas-tomcat" />
			</or>
			<then>
				<property name="war.file.dest" value="${app.server.portal.dir}/portal-web.war" />

				<copy todir="${app.server.portal.dir}">
					<fileset dir="${project.dir}/portal-ear/modules" />
				</copy>
			</then>
			<else>
				<property name="war.file.dest" value="${app.server.portal.dir}" />
			</else>
		</if>

		<if>
			<not>
				<equals arg1="${app.server.type}" arg2="orion" />
			</not>
			<then>
				<unwar src="liferay.com-web.war" dest="${war.file.dest}" />
			</then>
		</if>
	</target>
</project>