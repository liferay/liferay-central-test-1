<?xml version="1.0"?>

<project name="common" xmlns:antelope="antlib:ise.antelope.tasks">
	<property name="project.dir" value=".." />

	<property environment="env" />
	<property name="env.COMPUTERNAME" value="${env.HOST}" />
	<property name="env.COMPUTERNAME" value="${env.HOSTNAME}" />

	<property file="${project.dir}/app.server.${user.name}.properties" />
	<property file="${project.dir}/app.server.${env.COMPUTERNAME}.properties" />
	<property file="${project.dir}/app.server.properties" />

	<property file="${project.dir}/build.${user.name}.properties" />
	<property file="${project.dir}/build.${env.COMPUTERNAME}.properties" />
	<property file="${project.dir}/build.properties" />

	<property file="${project.dir}/release.${user.name}.properties" />
	<property file="${project.dir}/release.${env.COMPUTERNAME}.properties" />
	<property file="${project.dir}/release.properties" />

	<property file="${project.dir}/sql/sql.${user.name}.properties" />
	<property file="${project.dir}/sql/sql.${env.COMPUTERNAME}.properties" />
	<property file="${project.dir}/sql/sql.properties" />

	<path id="lib.classpath">
		<fileset dir="${project.dir}/lib/development" includes="*.jar" />
		<fileset dir="${project.dir}/lib/global" includes="*.jar" />
		<fileset dir="${project.dir}/lib/portal" includes="*.jar" />
	</path>

	<path id="project.classpath">
		<pathelement path="${classpath}" />
		<path refid="lib.classpath" />
	</path>

	<path id="web.classpath">
		<pathelement location="${project.dir}/portal-kernel/classes" />
		<pathelement location="${project.dir}/portal-service/classes" />
		<fileset dir="${project.dir}/lib/development" includes="mail.jar,servlet.jar" />
		<fileset dir="${project.dir}/lib/global" includes="*.jar" />
		<path refid="web-lib.classpath" />
	</path>

	<taskdef classpathref="lib.classpath" resource="net/sf/antcontrib/antlib.xml" />
	<taskdef classpathref="lib.classpath" resource="axis-tasks.properties" />
	<taskdef classpathref="lib.classpath" resource="ise/antelope/tasks/antlib.xml" uri="antlib:ise.antelope.tasks" />
	<taskdef classpathref="lib.classpath" resource="com/orangevolt/tools/ant/taskdefs.properties" />

	<property name="java2html.dir" value="${project.dir}/api/${ant.project.name}" />
	<property name="javadoc.dir" value="${project.dir}/api/${ant.project.name}" />

	<propertycopy name="app.server.version" from="app.server.${app.server.type}.version" silent="true" />
	<propertycopy name="app.server.dir" from="app.server.${app.server.type}.dir" />
	<propertycopy name="app.server.bin.dir" from="app.server.${app.server.type}.bin.dir" />
	<propertycopy name="app.server.classes.global.dir" from="app.server.${app.server.type}.classes.global.dir" />
	<propertycopy name="app.server.classes.portal.dir" from="app.server.${app.server.type}.classes.portal.dir" />
	<propertycopy name="app.server.deploy.dir" from="app.server.${app.server.type}.deploy.dir" />
	<propertycopy name="app.server.instance.dir" from="app.server.${app.server.type}.instance.dir" silent="true" />
	<propertycopy name="app.server.lib.endorsed.dir" from="app.server.${app.server.type}.lib.endorsed.dir" silent="true" />
	<propertycopy name="app.server.lib.global.dir" from="app.server.${app.server.type}.lib.global.dir" />
	<propertycopy name="app.server.lib.portal.dir" from="app.server.${app.server.type}.lib.portal.dir" />
	<propertycopy name="app.server.lib.support.dir" from="app.server.${app.server.type}.lib.support.dir" silent="true" />
	<propertycopy name="app.server.portal.dir" from="app.server.${app.server.type}.portal.dir" />
	<propertycopy name="app.server.log.dir" from="app.server.${app.server.type}.log.dir" />
	<propertycopy name="app.server.temp.dir" from="app.server.${app.server.type}.temp.dir" />
	<propertycopy name="app.server.work.dir" from="app.server.${app.server.type}.work.dir" />

	<target name="setproxy" if="setproxy.proxy.host">
		<setproxy proxyhost="${setproxy.proxy.host}" proxyport="${setproxy.proxy.port}" />
	</target>

	<condition property="correct.ant.version">
		<antversion atleast="1.7.0" />
	</condition>

	<if>
		<not>
			<equals arg1="${correct.ant.version}" arg2="true" />
		</not>
		<then>
			<fail message="Please use Ant 1.7.0 or above." />
		</then>
	</if>
</project>