<?xml version="1.0"?>

<project name="portal-test-jboss-tomcat" basedir="." default="test" xmlns:antelope="antlib:ise.antelope.tasks">
	<import file="build-test.xml" />

	<target name="run-jboss-tomcat-5.0">
		<antcall target="run-simple-server">
			<param name="simple.server.dir" value="${app.server.parent.dir}/jboss-tomcat-5.0.0" />
			<param name="simple.server.bin.dir" value="${app.server.parent.dir}/jboss-tomcat-5.0.0/bin" />
			<param name="simple.server.deploy.dir" value="${app.server.parent.dir}/jboss-tomcat-5.0.0/server/default/deploy" />
			<param name="simple.server.lib.global.dir" value="${app.server.parent.dir}/jboss-tomcat-5.0.0/server/default/lib" />
			<param name="simple.server.portal.dir" value="${app.server.parent.dir}/jboss-tomcat-5.0.0/server/default/deploy/ROOT.war" />
			<param name="simple.server.start.executable" value="run${file.suffix.bat}" />
			<param name="simple.server.stop.executable" value="shutdown${file.suffix.bat}" />
			<param name="simple.server.stop.executable.arg.line" value="-S" />
		</antcall>
	</target>

	<target name="test-jboss-tomcat-5.0-common">
		<ant antfile="build-dist.xml" target="build-dist-jboss-tomcat-5.0" />

		<antcall target="revert-test-properties" />

		<antcall target="start-selenium" />

		<antcall target="run-jboss-tomcat-5.0">
			<param name="test.class" value="SmokeTestSuite" />
		</antcall>

		<antcall target="stop-selenium" />
	</target>

	<target name="test-jboss-tomcat-5.0-mysql-5.0">
		<antcall target="prepare-mysql-5.0" />

		<antcall target="test-jboss-tomcat-5.0-common" />
	</target>

	<target name="test-jboss-tomcat-5.0-oracle-10">
		<antcall target="prepare-oracle-10" />

		<antcall target="test-jboss-tomcat-5.0-common" />
	</target>

	<target name="test-jboss-tomcat-5.0-postgresql-8.3">
		<antcall target="prepare-postgresql-8.3" />

		<antcall target="test-jboss-tomcat-5.0-common" />
	</target>

	<target name="test-jboss-tomcat-5.0-sql-server-2005">
		<antcall target="prepare-sql-server-2005" />

		<antcall target="test-jboss-tomcat-5.0-common" />
	</target>
</project>